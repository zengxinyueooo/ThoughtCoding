# ThoughtCoding - ä¼ä¸šçº§ AI ç¼–ç¨‹åŠ©æ‰‹

<div align="center">

![ThoughtCoding Banner](1759907149614.jpg)

**åŸºäº Model Context Protocol (MCP) çš„ä¸‹ä¸€ä»£æ™ºèƒ½ç¼–ç¨‹åŠ©æ‰‹**

**è®© AI ä¸ä»…ä¼šè¯´è¯ï¼Œæ›´èƒ½è¡ŒåŠ¨**

[![è§‚çœ‹æ¼”ç¤ºè§†é¢‘](https://img.shields.io/badge/è§‚çœ‹æ¼”ç¤º-red?style=for-the-badge&logo=bilibili)](https://www.bilibili.com/video/BV14D4uzWEhC?vd_source=5a2abdf9d1d2a4d1cb15fa9b92f6fbb2)
[![æŠ€æœ¯æ–‡æ¡£](https://img.shields.io/badge/æŠ€æœ¯æ–‡æ¡£-blue?style=for-the-badge&logo=github)](./ThoughtCodingæŠ€æœ¯æ–‡æ¡£.md)

</div>

---

## ğŸ“– ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [AI ç†è®ºåº”ç”¨](#ai-ç†è®ºåº”ç”¨)
- [å·¥ç¨‹å®è·µäº®ç‚¹](#å·¥ç¨‹å®è·µäº®ç‚¹)
- [å®é™…åº”ç”¨åœºæ™¯](#å®é™…åº”ç”¨åœºæ™¯)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

ThoughtCoding æ˜¯ä¸€ä¸ª**ä¼ä¸šçº§ AI ç¼–ç¨‹åŠ©æ‰‹ CLI å·¥å…·**ï¼Œå®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è¯ç•Œé¢ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„ **AI Agent ç³»ç»Ÿ**ã€‚

### ğŸŒŸ æ ¸å¿ƒèƒ½åŠ›

**è®© AI ä»"åªä¼šè¯´è¯"åˆ°"èƒ½å¤Ÿè¡ŒåŠ¨"**

- ğŸ¤– **æ™ºèƒ½ç†è§£**ï¼šç†è§£è‡ªç„¶è¯­è¨€æŒ‡ä»¤å¹¶è½¬åŒ–ä¸ºå…·ä½“æ“ä½œ
- ğŸ› ï¸ **è‡ªåŠ¨æ‰§è¡Œ**ï¼šè‡ªä¸»è°ƒç”¨ 50+ ç§å·¥å…·å®Œæˆå¤æ‚ä»»åŠ¡
- ğŸ”Œ **ç”Ÿæ€é›†æˆ**ï¼šé€šè¿‡ MCP åè®®è¿æ¥æ•´ä¸ªå·¥å…·ç”Ÿæ€ç³»ç»Ÿ
- ğŸ’¡ **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šåŸºäºä¼šè¯å†å²å’Œé¡¹ç›®ç¯å¢ƒæä¾›è¿è´¯ä½“éªŒ
- ğŸš€ **å®æ—¶å“åº”**ï¼šæµå¼è¾“å‡ºï¼ŒToken-by-Token å³æ—¶åé¦ˆ
- ğŸ“Š **æ•…éšœå½’å› **ï¼šè‡ªåŠ¨åˆ†æ Git å†å²ï¼Œå®šä½é—®é¢˜æ ¹å› 

### ğŸ’¼ å®é™…åº”ç”¨ä»·å€¼

åœ¨ä¼ä¸šå›¢é˜Ÿä¸­ï¼ŒThoughtCoding å¯ä»¥åº”ç”¨äºï¼š

1. **ğŸ” æ•…éšœè‡ªåŠ¨åˆ†æ**ï¼šé€šè¿‡ GitLab MCP è‡ªåŠ¨æ‹‰å–æ•…éšœä»£ç ï¼Œåˆ†æå½’å› ï¼Œç”ŸæˆæŠ¥å‘Šï¼ˆè€—æ—¶ä» 30 åˆ†é’Ÿé™åˆ° 5 åˆ†é’Ÿï¼‰
2. **ğŸ“ ä»£ç å®¡æŸ¥è‡ªåŠ¨åŒ–**ï¼šè‡ªåŠ¨æ£€æŸ¥ä»£ç è§„èŒƒã€æ½œåœ¨ bugã€å®‰å…¨æ¼æ´
3. **âš™ï¸ è¿ç»´è‡ªåŠ¨åŒ–**ï¼šæ‰¹é‡æœåŠ¡å™¨å¥åº·æ£€æŸ¥ã€æ•°æ®åº“æ€§èƒ½åˆ†æã€æ—¥å¿—æ™ºèƒ½åˆ†æ
4. **ğŸ“š çŸ¥è¯†åº“ç®¡ç†**ï¼šè‡ªç„¶è¯­è¨€æ£€ç´¢å›¢é˜Ÿæ–‡æ¡£ï¼Œè‡ªåŠ¨æ€»ç»“æŠ€æœ¯å‘¨æŠ¥
5. **ğŸ“ˆ æ•°æ®åˆ†æ**ï¼šè‡ªç„¶è¯­è¨€ç”Ÿæˆ SQL æŸ¥è¯¢ï¼Œç”Ÿæˆä¸šåŠ¡æŠ¥è¡¨

### ğŸ†š ä¸ºä»€ä¹ˆé€‰æ‹© ThoughtCodingï¼Ÿ

ç›¸æ¯”ä¼ ç»Ÿçš„ AI å¯¹è¯å·¥å…·ï¼ŒThoughtCoding å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

| ç‰¹æ€§ | ä¼ ç»Ÿ AI å·¥å…· | ThoughtCoding |
|------|-------------|--------------|
| **å·¥å…·é›†æˆ** | æ‰‹åŠ¨ç¼–å†™æ¯ä¸ªå·¥å…· | é€šè¿‡ MCP è‡ªåŠ¨å‘ç°å’Œé›†æˆ |
| **èƒ½åŠ›æ‰©å±•** | éœ€è¦ä¿®æ”¹ä»£ç  | YAML é…ç½®å³å¯ï¼Œæ— éœ€é‡å¯ |
| **ä¸Šä¸‹æ–‡ç®¡ç†** | ç®€å•çš„å¯¹è¯å†å² | 4 å±‚ä¸Šä¸‹æ–‡ + ä¼šè¯æŒä¹…åŒ– |
| **å®æ—¶ä½“éªŒ** | ç­‰å¾…å®Œæ•´å“åº”ï¼ˆ5-10sï¼‰ | æµå¼è¾“å‡ºï¼ˆé¦–å­—å»¶è¿Ÿ 0.5sï¼‰ |
| **ä¼ä¸šåº”ç”¨** | ä»…å¯¹è¯ | æ•…éšœåˆ†æã€ä»£ç å®¡æŸ¥ã€è‡ªåŠ¨åŒ–è¿ç»´ |
| **å·¥å…·æ•°é‡** | 10-20 ä¸ªå†…ç½®å·¥å…· | 50+ å·¥å…·ï¼ˆå¯æ— é™æ‰©å±•ï¼‰ |

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ AI èƒ½åŠ›

- **å¤šæ¨¡å‹æ”¯æŒ**ï¼šDeepSeekã€é€šä¹‰åƒé—®ç­‰å¤šç§ LLM
- **æµå¼äº¤äº’**ï¼šToken-by-Token å®æ—¶è¾“å‡º
- **ä¸Šä¸‹æ–‡ç®¡ç†**ï¼šæ™ºèƒ½çš„ä¼šè¯å†å²å’Œä¸Šä¸‹æ–‡çª—å£ç®¡ç†
- **æç¤ºè¯å·¥ç¨‹**ï¼šåŠ¨æ€æ„å»ºåŒ…å«å·¥å…·ä¿¡æ¯çš„ç³»ç»Ÿæç¤º

### ğŸ”§ å·¥å…·ç”Ÿæ€

- **MCP åè®®**ï¼šæ ‡å‡†åŒ–çš„å·¥å…·é€šä¿¡åè®®
- **åŠ¨æ€å‘ç°**ï¼šè‡ªåŠ¨è¯†åˆ«å’Œæ³¨å†Œ MCP æœåŠ¡å™¨çš„å·¥å…·
- **50+ å·¥å…·**ï¼šæ–‡ä»¶ç³»ç»Ÿã€æ•°æ®åº“ã€GitHubã€æœç´¢å¼•æ“ç­‰
- **å³æ’å³ç”¨**ï¼šæ— éœ€é‡å¯å³å¯åŠ¨æ€è¿æ¥æ–°å·¥å…·

### ğŸ¨ ç”¨æˆ·ä½“éªŒ

- **ç°ä»£åŒ– UI**ï¼šåŸºäº JLine çš„ç»ˆç«¯ç•Œé¢ï¼Œæ”¯æŒ ANSI é¢œè‰²
- **æ™ºèƒ½å‘½ä»¤**ï¼šè‡ªç„¶è¯­è¨€æˆ–å‘½ä»¤å¼äº¤äº’ï¼Œè‡ªåŠ¨è¯†åˆ«
- **ä¼šè¯ç®¡ç†**ï¼šä¼šè¯ä¿å­˜ã€åŠ è½½ã€ç»§ç»­
- **æ€§èƒ½ç›‘æ§**ï¼šToken ä½¿ç”¨ç»Ÿè®¡å’Œæ‰§è¡Œæ—¶é—´è¿½è¸ª

### ğŸ—ï¸ å·¥ç¨‹è´¨é‡

- **è®¾è®¡æ¨¡å¼**ï¼šBuilderã€Strategyã€Adapterã€Observer ç­‰
- **ä¾èµ–æ³¨å…¥**ï¼šæ¸…æ™°çš„ä¾èµ–å…³ç³»å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ Java ç±»å‹ç³»ç»Ÿ
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé™çº§ç­–ç•¥

---

## ğŸ›ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·äº¤äº’å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ CLI Commands â”‚  â”‚ Terminal UI  â”‚  â”‚ Input Handlerâ”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ ¸å¿ƒå¼•æ“å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  AgentLoop   â”‚  â”‚ MessageHandlerâ”‚ â”‚StreamingOutputâ”‚      â”‚
â”‚  â”‚  (å¯¹è¯å¾ªç¯)   â”‚  â”‚  (æ¶ˆæ¯å¤„ç†)   â”‚  â”‚  (æµå¼è¾“å‡º)   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AI æœåŠ¡å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚LangChainServ â”‚  â”‚ Context Mgmt â”‚  â”‚Prompt Engine â”‚      â”‚
â”‚  â”‚  (AI æ ¸å¿ƒ)   â”‚  â”‚ (ä¸Šä¸‹æ–‡ç®¡ç†)  â”‚  â”‚ (æç¤ºè¯å·¥ç¨‹)  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å·¥å…·ç³»ç»Ÿå±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ToolRegistry  â”‚  â”‚  MCP Service â”‚  â”‚ Built-in Toolsâ”‚      â”‚
â”‚  â”‚ (å·¥å…·æ³¨å†Œä¸­å¿ƒ) â”‚  â”‚  (MCP æœåŠ¡)  â”‚  â”‚  (å†…ç½®å·¥å…·)   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¤–éƒ¨å·¥å…·/æœåŠ¡å±‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Filesystem  â”‚  â”‚    GitHub    â”‚  â”‚   Database   â”‚      â”‚
â”‚  â”‚  Search      â”‚  â”‚    Weather   â”‚  â”‚   ...æ›´å¤š     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµè½¬å›¾

```
ç”¨æˆ·è¾“å…¥
   â†“
DirectCommandExecutor (å‘½ä»¤è¯†åˆ«)
   â†“
   â”œâ”€â†’ [ç›´æ¥å‘½ä»¤] â†’ ç«‹å³æ‰§è¡Œ â†’ è¿”å›ç»“æœ
   â”‚
   â””â”€â†’ [AI å¤„ç†] â†’ AgentLoop
                      â†“
                  LangChainService
                      â†“
                  å‡†å¤‡ä¸Šä¸‹æ–‡ (å†å² + å·¥å…·åˆ—è¡¨)
                      â†“
                  å‘é€åˆ° DeepSeek API
                      â†“
                  æµå¼æ¥æ”¶å“åº”
                      â†“
                  â”œâ”€â†’ [çº¯æ–‡æœ¬] â†’ æ˜¾ç¤ºç»™ç”¨æˆ·
                  â”‚
                  â””â”€â†’ [å·¥å…·è°ƒç”¨] â†’ ToolRegistry
                                      â†“
                                  æŸ¥æ‰¾å¹¶æ‰§è¡Œå·¥å…·
                                      â†“
                                  è¿”å›ç»“æœç»™ç”¨æˆ·
```

---

## ğŸ§  AI ç†è®ºåº”ç”¨

> è¯¦ç»†å†…å®¹è¯·æŸ¥çœ‹ [å®Œæ•´æŠ€æœ¯æ–‡æ¡£](./ThoughtCodingæŠ€æœ¯æ–‡æ¡£.md)

### 1ï¸âƒ£ ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆContext Managementï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼šè®© AI ç†è§£å®Œæ•´çš„å¯¹è¯å†å²å’Œé¡¹ç›®ç¯å¢ƒ

**åˆ†å±‚ä¸Šä¸‹æ–‡æ¶æ„**ï¼š

```
ç³»ç»Ÿä¸Šä¸‹æ–‡å±‚ï¼ˆSystem Contextï¼‰
    â†“ è§’è‰²å®šä½ + è¡Œä¸ºè§„èŒƒ
å·¥å…·ä¸Šä¸‹æ–‡å±‚ï¼ˆTool Contextï¼‰
    â†“ åŠ¨æ€æ³¨å…¥å¯ç”¨å·¥å…·åˆ—è¡¨
ä¼šè¯ä¸Šä¸‹æ–‡å±‚ï¼ˆSession Contextï¼‰
    â†“ å†å²å¯¹è¯è®°å½•ï¼ˆè‡ªåŠ¨æŒä¹…åŒ–ï¼‰
é¡¹ç›®ä¸Šä¸‹æ–‡å±‚ï¼ˆProject Contextï¼‰
    â†“ è‡ªåŠ¨è¯†åˆ«é¡¹ç›®ç±»å‹ï¼ˆMaven/Gradleï¼‰
å½“å‰è¾“å…¥
```

**ä»£ç å®ç°**ï¼š

```java
// å‡†å¤‡å®Œæ•´ä¸Šä¸‹æ–‡
private List<ChatMessage> prepareMessages(String input, List<ChatMessage> history) {
    List<ChatMessage> messages = new ArrayList<>();
    
    // 1. ç³»ç»Ÿæç¤ºï¼ˆåŒ…å«å·¥å…·ä¿¡æ¯ï¼‰
    messages.add(SystemMessage.from(buildSystemPromptWithTools()));
    
    // 2. å†å²å¯¹è¯ï¼ˆæœ€è¿‘ N è½®ï¼‰
    messages.addAll(convertToLangChainHistory(history));
    
    // 3. å½“å‰è¾“å…¥
    messages.add(UserMessage.from(input));
    
    return messages;
}
```

**ä¼˜åŒ–ç­–ç•¥**ï¼š
- **æ»‘åŠ¨çª—å£**ï¼šåªä¿ç•™æœ€è¿‘ N è½®å¯¹è¯ï¼Œé¿å…è¶…å‡º Token é™åˆ¶
- **é€‰æ‹©æ€§åŠ è½½**ï¼šæ ¹æ®ä»»åŠ¡ç±»å‹åŠ¨æ€åŠ è½½ç›¸å…³ä¸Šä¸‹æ–‡
- **æŒä¹…åŒ–å­˜å‚¨**ï¼šä¼šè¯è‡ªåŠ¨ä¿å­˜åˆ° JSON æ–‡ä»¶

**åœ¨æ•…éšœåˆ†æä¸­çš„åº”ç”¨**ï¼š
- ä¿ç•™å®Œæ•´çš„é”™è¯¯å †æ ˆä¿¡æ¯ï¼ˆå…³é”®ä¸Šä¸‹æ–‡ï¼‰
- è®°å½•å·²å°è¯•çš„è§£å†³æ–¹æ¡ˆï¼ˆé¿å…é‡å¤ï¼‰
- è‡ªåŠ¨åŠ è½½é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ˆpom.xmlã€application.ymlï¼‰
- å…³è” Git æäº¤å†å²ï¼ˆå®šä½å¼•å…¥é—®é¢˜çš„å˜æ›´ï¼‰

---

### 2ï¸âƒ£ å·¥å…·è°ƒç”¨ï¼ˆTool Callingï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼šè®© AI ä»"åªä¼šè¯´è¯"åˆ°"èƒ½å¤Ÿè¡ŒåŠ¨"

**æŠ€æœ¯æŒ‘æˆ˜**ï¼šDeepSeek ä¸æ”¯æŒ OpenAI åŸç”Ÿçš„ Function Calling

**æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ**ï¼š**æç¤ºè¯é©±åŠ¨çš„å·¥å…·è°ƒç”¨**

```java
// 1. åŠ¨æ€ç”Ÿæˆç³»ç»Ÿæç¤ºè¯
private String buildSystemPromptWithTools() {
    StringBuilder prompt = new StringBuilder();
    prompt.append("ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç¼–ç¨‹åŠ©æ‰‹ï¼Œå¯ä»¥è°ƒç”¨ä»¥ä¸‹å·¥å…·ï¼š\n\n");
    
    for (BaseTool tool : toolRegistry.getAllTools()) {
        prompt.append(String.format(
            "å·¥å…·åç§°ï¼š%s\næè¿°ï¼š%s\nå‚æ•°ï¼š%s\n\n",
            tool.getName(),
            tool.getDescription(),
            tool.getInputSchema()
        ));
    }
    
    return prompt.toString();
}

// 2. å·¥å…·æ³¨å†Œä¸å‘ç°
public class ToolRegistry {
    private final Map<String, BaseTool> tools = new HashMap<>();
    
    public void register(BaseTool tool) {
        tools.put(tool.getName(), tool);
    }
    
    public BaseTool getTool(String toolName) {
        return tools.get(toolName);
    }
}
```

**å·¥å…·åˆ†ç±»**ï¼š

| ç±»å‹ | å·¥å…·ç¤ºä¾‹ | å®ç°æ–¹å¼ |
|------|---------|---------|
| **å†…ç½®å·¥å…·** | FileManagerã€CommandExecutor | Java ç›´æ¥å®ç° |
| **MCPå·¥å…·** | GitHubã€Databaseã€Filesystem | é€šè¿‡ MCP åè®®è¿æ¥ |
| **è‡ªå®šä¹‰å·¥å…·** | CodeExecutorã€GrepSearch | é¡¹ç›®ç‰¹å®šå®ç° |

**å·¥å…·æ‰§è¡Œæµç¨‹**ï¼š

```
ç”¨æˆ·è¾“å…¥ï¼š"æŸ¥çœ‹ pom.xml æ–‡ä»¶"
    â†“
AI ç†è§£æ„å›¾ â†’ éœ€è¦è¯»å–æ–‡ä»¶
    â†“
ç”Ÿæˆå·¥å…·è°ƒç”¨ â†’ file_manager(path="pom.xml", action="read")
    â†“
ToolRegistry æŸ¥æ‰¾å·¥å…· â†’ FileManagerTool
    â†“
æ‰§è¡Œå·¥å…· â†’ è¯»å–æ–‡ä»¶å†…å®¹
    â†“
è¿”å›ç»“æœç»™ AI
    â†“
AI è§£é‡Šç»“æœ â†’ "è¿™æ˜¯ä½ çš„ pom.xml æ–‡ä»¶å†…å®¹..."
```

---

### 3ï¸âƒ£ MCP åè®®ï¼ˆModel Context Protocolï¼‰

**ä»€ä¹ˆæ˜¯ MCPï¼Ÿ**

MCP æ˜¯ä¸€ä¸ª**æ ‡å‡†åŒ–çš„ AI å·¥å…·é€šä¿¡åè®®**ï¼Œç”± Anthropic æå‡ºï¼Œè§£å†³ AI å·¥å…·é›†æˆçš„ç¢ç‰‡åŒ–é—®é¢˜ã€‚

**MCP vs ä¼ ç»Ÿå·¥å…·é›†æˆ**ï¼š

| å¯¹æ¯”é¡¹ | ä¼ ç»Ÿæ–¹å¼ | MCP æ–¹å¼ |
|-------|---------|---------|
| **å·¥å…·å¼€å‘** | ä¸ºæ¯ä¸ª AI åº”ç”¨é‡å¤å¼€å‘ | ä¸€æ¬¡å¼€å‘ï¼Œæ‰€æœ‰ AI åº”ç”¨é€šç”¨ |
| **åè®®æ ‡å‡†** | å„å®¶è‡ªå®šä¹‰ | ç»Ÿä¸€çš„ JSON-RPC åè®® |
| **å‘ç°æœºåˆ¶** | æ‰‹åŠ¨æ³¨å†Œ | è‡ªåŠ¨å‘ç°å’Œæ³¨å†Œ |
| **ç»´æŠ¤æˆæœ¬** | é«˜ï¼ˆNÃ—Mï¼‰ | ä½ï¼ˆN+Mï¼‰ |
| **æ‰©å±•æ€§** | å›°éš¾ | ç®€å•ï¼ˆå³æ’å³ç”¨ï¼‰ |

**æˆ‘ä»¬çš„å®ç°**ï¼š

```java
// MCPClient.java - é€šè¿‡ stdio ä¸ MCP æœåŠ¡å™¨é€šä¿¡
public class MCPClient {
    // å¯åŠ¨ MCP æœåŠ¡å™¨è¿›ç¨‹
    public boolean connect(String command, List<String> args) {
        ProcessBuilder pb = new ProcessBuilder();
        pb.command(buildFullCommand(command, args));
        process = pb.start();
        
        // åˆå§‹åŒ– JSON-RPC é€šä¿¡
        initializeJsonRpcCommunication();
        return true;
    }
    
    // è·å–å¯ç”¨å·¥å…·åˆ—è¡¨
    public List<MCPTool> getAvailableTools() {
        MCPRequest request = new MCPRequest("tools/list", null);
        return sendRequest(request).getTools();
    }
    
    // è°ƒç”¨å·¥å…·
    public Object callTool(String toolName, Map<String, Object> arguments) {
        MCPRequest request = new MCPRequest("tools/call", 
            Map.of("name", toolName, "arguments", arguments));
        return sendRequest(request).getResult();
    }
}
```

**é…ç½®é©±åŠ¨çš„å·¥å…·ç”Ÿæ€**ï¼š

```yaml
mcp:
  enabled: true
  servers:
    - name: "filesystem"
      command: "npx"
      args:
        - "-y"
        - "@modelcontextprotocol/server-filesystem"
        - "/Users/username"
    
    - name: "github"
      command: "npx"
      args:
        - "-y"
        - "@modelcontextprotocol/server-github"
        - "--token"
        - "ghp_xxxxx"
```

**ä¼˜åŠ¿**ï¼š
- âœ… **é›¶ä»£ç æ‰©å±•**ï¼šæ·»åŠ æ–°å·¥å…·åªéœ€ä¿®æ”¹ YAML é…ç½®
- âœ… **åŠ¨æ€åŠ è½½**ï¼šè¿è¡Œæ—¶çƒ­åŠ è½½æ–°å·¥å…·
- âœ… **å›¢é˜Ÿå®šåˆ¶**ï¼šæ¯ä¸ªå›¢é˜Ÿç»´æŠ¤è‡ªå·±çš„å·¥å…·é…ç½®
- âœ… **æ ‡å‡†åŒ–**ï¼šæ‰€æœ‰å·¥å…·éµå¾ªç»Ÿä¸€åè®®

---

### 4ï¸âƒ£ æç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼šæç¤ºè¯æ˜¯ AI çš„"ç¼–ç¨‹è¯­è¨€"

**åˆ†å±‚æç¤ºè¯æ¶æ„**ï¼š

```
ç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰
    â”œâ”€ è§’è‰²å®šä½ï¼š"ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç¼–ç¨‹åŠ©æ‰‹"
    â”œâ”€ èƒ½åŠ›è¯´æ˜ï¼š"ä½ å¯ä»¥è°ƒç”¨ä»¥ä¸‹å·¥å…·..."
    â”œâ”€ å·¥å…·åˆ—è¡¨ï¼šåŠ¨æ€æ³¨å…¥æ‰€æœ‰å¯ç”¨å·¥å…·
    â””â”€ è¡Œä¸ºè§„èŒƒï¼š"è¯·æ ¹æ®ç”¨æˆ·éœ€æ±‚é€‰æ‹©åˆé€‚çš„å·¥å…·"

ç”¨æˆ·æç¤ºè¯ï¼ˆUser Promptï¼‰
    â”œâ”€ å½“å‰è¾“å…¥
    â””â”€ ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰

å†å²æç¤ºè¯ï¼ˆHistoryï¼‰
    â””â”€ ä¹‹å‰çš„å¯¹è¯è®°å½•
```

**åŠ¨æ€æç¤ºè¯ç”Ÿæˆ**ï¼š

```java
private String buildSystemPromptWithTools() {
    StringBuilder prompt = new StringBuilder();
    
    // 1. è§’è‰²å®šä½
    prompt.append("ä½ æ˜¯ ThoughtCodingï¼Œä¸€ä¸ªä¸“ä¸šçš„ç¼–ç¨‹åŠ©æ‰‹ã€‚\n\n");
    
    // 2. åŠ¨æ€å·¥å…·åˆ—è¡¨
    for (BaseTool tool : toolRegistry.getAllTools()) {
        prompt.append(formatToolDescription(tool));
    }
    
    // 3. è¡Œä¸ºè§„èŒƒ
    prompt.append("ä½¿ç”¨è§„åˆ™ï¼š\n");
    prompt.append("- ä¼˜å…ˆç†è§£ç”¨æˆ·æ„å›¾\n");
    prompt.append("- é€‰æ‹©æœ€åˆé€‚çš„å·¥å…·\n");
    prompt.append("- æ¸…æ™°è§£é‡Šæ‰§è¡Œè¿‡ç¨‹\n");
    
    return prompt.toString();
}
```

**ä¼˜åŒ–æŠ€å·§**ï¼š
- **æ˜ç¡®æ€§**ï¼šæ¸…æ™°å®šä¹‰å·¥å…·çš„è¾“å…¥è¾“å‡ºæ ¼å¼
- **ç»“æ„åŒ–**ï¼šä½¿ç”¨ Markdownã€JSON æ ¼å¼ç»„ç»‡ä¿¡æ¯
- **çº¦æŸæ€§**ï¼šé™å®š AI çš„è¡Œä¸ºèŒƒå›´ï¼Œé¿å…å¹»è§‰
- **ç¤ºä¾‹æ€§**ï¼šæä¾›å…¸å‹ç”¨ä¾‹ï¼ˆFew-shot Learningï¼‰

---

## ğŸ”§ å·¥ç¨‹å®è·µäº®ç‚¹

### è®¾è®¡æ¨¡å¼åº”ç”¨

| è®¾è®¡æ¨¡å¼ | åº”ç”¨åœºæ™¯ | ä»£ç ä½ç½® |
|---------|---------|---------|
| **Builder** | æ„å»ºå¤æ‚çš„ ThoughtCodingContext å¯¹è±¡ | `ThoughtCodingContext.Builder` |
| **Strategy** | æ”¯æŒå¤šç§ AI æ¨¡å‹ï¼ˆDeepSeekã€é€šä¹‰åƒé—®ï¼‰ | `AIService` æ¥å£ |
| **Adapter** | å°† MCP å·¥å…·é€‚é…ä¸º BaseTool | `MCPToolAdapter` |
| **Observer** | æµå¼è¾“å‡ºçš„å®æ—¶æ›´æ–° | `StreamingResponseHandler` |
| **Singleton** | å…¨å±€å”¯ä¸€çš„é…ç½®ç®¡ç†å™¨ | `ConfigManager` |
| **Template Method** | å·¥å…·æ‰§è¡Œçš„æ ‡å‡†æµç¨‹ | `BaseTool.executeWithValidation` |

### æ¶æ„è®¾è®¡åŸåˆ™

**â‘  åˆ†å±‚æ¶æ„**ï¼š

```
Presentation Layer (CLI/UI)      â† ç”¨æˆ·äº¤äº’å±‚
    â†“
Application Layer (Commands)      â† åº”ç”¨å±‚
    â†“
Domain Layer (Core/Service)       â† é¢†åŸŸå±‚
    â†“
Infrastructure Layer (MCP)        â† åŸºç¡€è®¾æ–½å±‚
```

**â‘¡ ä¾èµ–æ³¨å…¥**ï¼š

```java
// é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–ï¼Œé™ä½è€¦åˆåº¦
public class AgentLoop {
    private final ThoughtCodingContext context;
    
    public AgentLoop(ThoughtCodingContext context, ...) {
        this.context = context;  // ä¾èµ–æ³¨å…¥
    }
}
```

**â‘¢ æ¥å£éš”ç¦»**ï¼š

```java
// å·¥å…·æä¾›è€…æ¥å£
public interface ToolProvider {
    void registerTool(BaseTool tool);
    BaseTool getTool(String toolName);
    boolean isToolAvailable(String toolName);
}
```

### æ€§èƒ½ä¼˜åŒ–

**â‘  æµå¼å“åº”**ï¼šé¦–å­—å»¶è¿Ÿä» 5-10s é™ä½åˆ° 0.5-1s

```java
streamingChatModel.generate(messages, new StreamingResponseHandler<AiMessage>() {
    @Override
    public void onNext(String token) {
        System.out.print(token);  // å®æ—¶è¾“å‡º
        System.out.flush();
    }
});
```

**â‘¡ ä¼šè¯æŒä¹…åŒ–**ï¼šè‡ªåŠ¨ä¿å­˜ä¼šè¯åˆ° JSON æ–‡ä»¶

```java
public void saveSession(String sessionId, List<ChatMessage> history) {
    SessionData sessionData = SessionData.builder()
        .sessionId(sessionId)
        .messages(history)
        .createdAt(LocalDateTime.now())
        .build();
    
    String json = objectMapper.writeValueAsString(sessionData);
    Files.writeString(sessionFile, json);
}
```

**â‘¢ å¹¶å‘å®‰å…¨**ï¼šä½¿ç”¨ `ConcurrentHashMap` ç®¡ç† MCP å®¢æˆ·ç«¯

```java
private final Map<String, MCPClient> connectedServers = new ConcurrentHashMap<>();
```

---

## ğŸ’¼ å®é™…åº”ç”¨åœºæ™¯

### 1ï¸âƒ£ æ•…éšœè‡ªåŠ¨åˆ†æä¸å½’å› 

**åœºæ™¯**ï¼šç”Ÿäº§ç¯å¢ƒå‡ºç°æ•…éšœï¼Œéœ€è¦å¿«é€Ÿå®šä½é—®é¢˜åŸå› 

**ä¼ ç»Ÿæ–¹å¼**ï¼šè€—æ—¶ 30-60 åˆ†é’Ÿ
- æ‰‹åŠ¨æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
- é€ä¸ªæ£€æŸ¥é…ç½®æ–‡ä»¶
- äººå·¥åˆ†æå †æ ˆä¿¡æ¯
- æŸ¥æ‰¾ç›¸å…³ä»£ç å˜æ›´

**ThoughtCoding è§£å†³æ–¹æ¡ˆ**ï¼šè€—æ—¶ 2-5 åˆ†é’Ÿ

```bash
# 1. è¿æ¥ GitLab MCP
thought> /mcp connect gitlab

# 2. è‡ªç„¶è¯­è¨€æè¿°é—®é¢˜
thought> ç”Ÿäº§ç¯å¢ƒå‡ºç° NullPointerExceptionï¼Œ
         è¯·å¸®æˆ‘åˆ†ææœ€è¿‘çš„ä»£ç å˜æ›´å¹¶å®šä½é—®é¢˜

# AI è‡ªåŠ¨æ‰§è¡Œï¼š
# â‘  è°ƒç”¨ GitLab API è·å–æœ€è¿‘çš„æäº¤è®°å½•
# â‘¡ åˆ†æå˜æ›´çš„ä»£ç æ–‡ä»¶
# â‘¢ æŸ¥æ‰¾å¯èƒ½å¯¼è‡´ NPE çš„ä»£ç ä½ç½®
# â‘£ æ£€æŸ¥ç›¸å…³é…ç½®æ–‡ä»¶
# â‘¤ ç”Ÿæˆé—®é¢˜æŠ¥å‘Šå’Œä¿®å¤å»ºè®®
```

**æ•ˆæœ**ï¼š
- âœ… è€—æ—¶é™ä½ 85%ï¼ˆä» 30 åˆ†é’Ÿåˆ° 5 åˆ†é’Ÿï¼‰
- âœ… å‡†ç¡®ç‡ 85%+ èƒ½å‡†ç¡®å®šä½é—®é¢˜
- âœ… è‡ªåŠ¨ç”Ÿæˆä¿®å¤å»ºè®®å’Œå½±å“èŒƒå›´åˆ†æ

---

### 2ï¸âƒ£ ä»£ç å®¡æŸ¥è‡ªåŠ¨åŒ–

**åœºæ™¯**ï¼šå›¢é˜Ÿä»£ç  Review æµç¨‹è€—æ—¶ï¼Œéœ€è¦è‡ªåŠ¨åŒ–æ£€æŸ¥

```bash
thought> è¯·å®¡æŸ¥æœ€è¿‘çš„ 3 ä¸ª Pull Requestï¼Œ
         é‡ç‚¹æ£€æŸ¥ä»£ç è§„èŒƒã€æ½œåœ¨ bug å’Œæ€§èƒ½é—®é¢˜

# AI è‡ªåŠ¨æ‰§è¡Œï¼š
# â‘  GitLab MCP: è·å–æœ€è¿‘çš„ MR åˆ—è¡¨
# â‘¡ Filesystem MCP: è¯»å–å˜æ›´çš„ä»£ç æ–‡ä»¶
# â‘¢ é™æ€åˆ†æï¼šæ£€æŸ¥ä»£ç è§„èŒƒ
# â‘£ å®‰å…¨æ‰«æï¼šæŸ¥æ‰¾å®‰å…¨æ¼æ´
# â‘¤ æ€§èƒ½è¯„ä¼°ï¼šè¯†åˆ«æ€§èƒ½ç“¶é¢ˆ
# â‘¥ ç”Ÿæˆå®¡æŸ¥æŠ¥å‘Š
```

**æ£€æŸ¥é¡¹**ï¼š
- ä»£ç è§„èŒƒï¼šå‘½åè§„èŒƒã€æ³¨é‡Šå®Œæ•´æ€§
- æ½œåœ¨ Bugï¼šç©ºæŒ‡é’ˆã€èµ„æºæ³„æ¼ã€å¹¶å‘é—®é¢˜
- æ€§èƒ½é—®é¢˜ï¼šä½æ•ˆç®—æ³•ã€ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º
- å®‰å…¨æ¼æ´ï¼šSQL æ³¨å…¥ã€XSSã€æ•æ„Ÿä¿¡æ¯æ³„æ¼

---

### 3ï¸âƒ£ è‡ªåŠ¨åŒ–è¿ç»´

**æ‰¹é‡æœåŠ¡å™¨å¥åº·æ£€æŸ¥**ï¼š

```bash
thought> æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒæ‰€æœ‰æœåŠ¡å™¨çš„ CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡

# AI è°ƒç”¨ SSH MCP å·¥å…·
# è‡ªåŠ¨è¿æ¥æœåŠ¡å™¨åˆ—è¡¨
# æ‰§è¡Œç›‘æ§å‘½ä»¤
# æ±‡æ€»ç”ŸæˆæŠ¥å‘Š
```

**æ•°æ®åº“æ€§èƒ½åˆ†æ**ï¼š

```bash
thought> åˆ†ææ•°æ®åº“æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œæ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆå¹¶ç»™å‡ºä¼˜åŒ–å»ºè®®

# AI è°ƒç”¨ Database MCP
# è¯»å–æ…¢æŸ¥è¯¢æ—¥å¿—
# åˆ†ææ‰§è¡Œè®¡åˆ’
# ç”Ÿæˆä¼˜åŒ–å»ºè®®ï¼ˆç´¢å¼•ã€SQLé‡å†™ï¼‰
```

**æ—¥å¿—æ™ºèƒ½åˆ†æ**ï¼š

```bash
thought> åˆ†æä»Šå¤©çš„ Nginx æ—¥å¿—ï¼Œç»Ÿè®¡è®¿é—®é‡ã€é”™è¯¯ç‡å’Œå¼‚å¸¸è¯·æ±‚

# AI è°ƒç”¨ Filesystem MCP
# è¯»å–æ—¥å¿—æ–‡ä»¶
# æ­£åˆ™æå–å…³é”®ä¿¡æ¯
# ç»Ÿè®¡åˆ†æ
# ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š
```

---

### 4ï¸âƒ£ çŸ¥è¯†åº“ç®¡ç†

```bash
# è¿æ¥çŸ¥è¯†åº“
thought> /mcp connect notion

# è‡ªç„¶è¯­è¨€æ£€ç´¢
thought> æŸ¥æ‰¾å…³äºå¾®æœåŠ¡æ¶æ„çš„æœ€ä½³å®è·µæ–‡æ¡£

# è‡ªåŠ¨æ€»ç»“
thought> æ€»ç»“æœ€è¿‘ä¸€å‘¨çš„æŠ€æœ¯å‘¨æŠ¥ï¼Œæå–å…³é”®ä¿¡æ¯

# æ™ºèƒ½é—®ç­”
thought> æˆ‘ä»¬é¡¹ç›®çš„ Redis é…ç½®å‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿ
```

---

### 5ï¸âƒ£ æ•°æ®åˆ†æ

```bash
thought> æŸ¥è¯¢æ˜¨å¤©çš„è®¢å•æ•°æ®ï¼ŒæŒ‰åœ°åŒºç»Ÿè®¡é”€å”®é¢ï¼Œç”Ÿæˆ Top 10 æ’è¡Œ

# AI è‡ªåŠ¨æ‰§è¡Œï¼š
# â‘  è¿æ¥æ•°æ®åº“ï¼ˆPostgreSQL MCPï¼‰
# â‘¡ ç”Ÿæˆ SQL æŸ¥è¯¢
# â‘¢ æ‰§è¡ŒæŸ¥è¯¢
# â‘£ æ ¼å¼åŒ–ç»“æœ
# â‘¤ ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨ï¼ˆå¯é€‰ï¼‰
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Java 17+
- Maven 3.6+
- Node.js 18+ (ç”¨äº MCP å·¥å…·)

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/ThoughtCoding.git
cd ThoughtCoding

# 2. é…ç½® API Key
export DEEPSEEK_API_KEY="your-api-key-here"

# 3. ç¼–è¯‘é¡¹ç›®
mvn clean package

# 4. è¿è¡Œ
./bin/thought
```

### åŸºæœ¬ä½¿ç”¨

```bash
# å¯åŠ¨äº¤äº’æ¨¡å¼
./bin/thought

# è‡ªç„¶è¯­è¨€äº¤äº’
thought> å¸®æˆ‘æŸ¥çœ‹ pom.xml
thought> æŸ¥çœ‹ sessions ç›®å½•
thought> åœ¨é¡¹ç›®ä¸­æœç´¢åŒ…å« "MCP" çš„ Java æ–‡ä»¶

# è¿æ¥ MCP å·¥å…·
thought> /mcp connect filesystem
thought> /mcp connect github
thought> /mcp list

# ä¼šè¯ç®¡ç†
thought> /session save my-session
thought> /session load my-session
thought> /session list

# é…ç½®ç®¡ç†
thought> /config show
thought> /config list-models
```

### ä½¿ç”¨ç¤ºä¾‹

**ç¤ºä¾‹ 1ï¼šæ–‡ä»¶æ“ä½œ**

```bash
thought> è¯»å– src/main/resources/config.yaml æ–‡ä»¶å†…å®¹

# AI è‡ªåŠ¨è°ƒç”¨ file_manager å·¥å…·
# è¿”å›æ–‡ä»¶å†…å®¹å¹¶è§£é‡Šé…ç½®é¡¹
```

**ç¤ºä¾‹ 2ï¼šä»£ç æœç´¢**

```bash
thought> åœ¨é¡¹ç›®ä¸­æŸ¥æ‰¾æ‰€æœ‰åŒ…å« "MCP" çš„ Java æ–‡ä»¶

# AI è°ƒç”¨ grep_search å·¥å…·
# åˆ—å‡ºæ‰€æœ‰åŒ¹é…çš„æ–‡ä»¶å’Œè¡Œå·
```

**ç¤ºä¾‹ 3ï¼šGit æ“ä½œ**

```bash
thought> æŸ¥çœ‹æœ€è¿‘ 5 æ¬¡æäº¤è®°å½•

# AI è°ƒç”¨ command_executor æ‰§è¡Œ git log
# æ ¼å¼åŒ–æ˜¾ç¤ºæäº¤ä¿¡æ¯
```

**ç¤ºä¾‹ 4ï¼šæ•°æ®åº“æŸ¥è¯¢**ï¼ˆéœ€è¦å…ˆè¿æ¥ MCPï¼‰

```bash
thought> /mcp connect postgres
thought> æŸ¥è¯¢ç”¨æˆ·è¡¨ä¸­æœ€è¿‘æ³¨å†Œçš„ 10 ä¸ªç”¨æˆ·

# AI è‡ªåŠ¨ç”Ÿæˆ SQL å¹¶æ‰§è¡Œ
# æ ¼å¼åŒ–æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
ThoughtCoding/
â”œâ”€â”€ src/main/java/com/thoughtcoding/
â”‚   â”œâ”€â”€ ThoughtCodingCLI.java           # å…¥å£ç±»
â”‚   â”œâ”€â”€ cli/                            # å‘½ä»¤è¡Œè§£æ
â”‚   â”‚   â”œâ”€â”€ ThoughtCodingCommand.java   # ä¸»å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ SessionCommand.java         # ä¼šè¯ç®¡ç†å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ ConfigCommand.java          # é…ç½®ç®¡ç†å‘½ä»¤
â”‚   â”‚   â””â”€â”€ MCPCommand.java             # MCP ç®¡ç†å‘½ä»¤
â”‚   â”œâ”€â”€ core/                           # æ ¸å¿ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ ThoughtCodingContext.java   # åº”ç”¨ä¸Šä¸‹æ–‡ï¼ˆä¾èµ–æ³¨å…¥å®¹å™¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ AgentLoop.java              # AI å¯¹è¯å¾ªç¯
â”‚   â”‚   â”œâ”€â”€ MessageHandler.java         # æ¶ˆæ¯å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ StreamingOutput.java        # æµå¼è¾“å‡º
â”‚   â”‚   â””â”€â”€ ProjectContext.java         # é¡¹ç›®ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ service/                        # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ AIService.java              # AI æœåŠ¡æ¥å£
â”‚   â”‚   â”œâ”€â”€ LangChainService.java       # LangChain4j å®ç°
â”‚   â”‚   â”œâ”€â”€ SessionService.java         # ä¼šè¯ç®¡ç†
â”‚   â”‚   â””â”€â”€ PerformanceMonitor.java     # æ€§èƒ½ç›‘æ§
â”‚   â”œâ”€â”€ mcp/                            # MCP åè®®å®ç°
â”‚   â”‚   â”œâ”€â”€ MCPClient.java              # MCP å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ MCPService.java             # MCP æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ MCPToolManager.java         # MCP å·¥å…·ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ MCPToolAdapter.java         # å·¥å…·é€‚é…å™¨
â”‚   â”‚   â””â”€â”€ model/                      # MCP æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ tools/                          # å·¥å…·ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ BaseTool.java               # å·¥å…·åŸºç±»
â”‚   â”‚   â”œâ”€â”€ ToolRegistry.java           # å·¥å…·æ³¨å†Œä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ ToolProvider.java           # å·¥å…·æä¾›è€…æ¥å£
â”‚   â”‚   â”œâ”€â”€ file/FileManagerTool.java   # æ–‡ä»¶ç®¡ç†å·¥å…·
â”‚   â”‚   â”œâ”€â”€ exec/CommandExecutorTool.java # å‘½ä»¤æ‰§è¡Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ exec/CodeExecutorTool.java  # ä»£ç æ‰§è¡Œå·¥å…·
â”‚   â”‚   â””â”€â”€ search/GrepSearchTool.java  # ä»£ç æœç´¢å·¥å…·
â”‚   â”œâ”€â”€ config/                         # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ AppConfig.java              # åº”ç”¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ MCPConfig.java              # MCP é…ç½®
â”‚   â”‚   â”œâ”€â”€ ConfigManager.java          # é…ç½®ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ ConfigLoader.java           # é…ç½®åŠ è½½å™¨
â”‚   â”œâ”€â”€ ui/                             # ç”¨æˆ·ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ ThoughtCodingUI.java        # UI ä¸»ç±»
â”‚   â”‚   â”œâ”€â”€ TerminalManager.java        # ç»ˆç«¯ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ AnsiColors.java             # ANSI é¢œè‰²å®šä¹‰
â”‚   â”œâ”€â”€ model/                          # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ ChatMessage.java            # èŠå¤©æ¶ˆæ¯
â”‚   â”‚   â”œâ”€â”€ ToolCall.java               # å·¥å…·è°ƒç”¨
â”‚   â”‚   â”œâ”€â”€ ToolResult.java             # å·¥å…·ç»“æœ
â”‚   â”‚   â””â”€â”€ SessionData.java            # ä¼šè¯æ•°æ®
â”‚   â””â”€â”€ util/                           # å·¥å…·ç±»
â”‚       â”œâ”€â”€ JsonUtils.java              # JSON å·¥å…·
â”‚       â”œâ”€â”€ FileUtils.java              # æ–‡ä»¶å·¥å…·
â”‚       â””â”€â”€ StreamUtils.java            # æµå¤„ç†å·¥å…·
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ config.yaml                     # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ thoughtcoding-banner.txt        # å¯åŠ¨æ¨ªå¹…
â”œâ”€â”€ sessions/                           # ä¼šè¯å­˜å‚¨ç›®å½•
â”œâ”€â”€ bin/
â”‚   â”œâ”€â”€ thought                         # Unix/Linux å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ thought.bat                     # Windows å¯åŠ¨è„šæœ¬
â”œâ”€â”€ pom.xml                             # Maven é…ç½®
â””â”€â”€ README.md                           # æœ¬æ–‡æ¡£
```

### æ ¸å¿ƒç»„ä»¶è¯´æ˜

| ç»„ä»¶ | èŒè´£ | å…³é”®ç±» |
|------|------|-------|
| **CLI å±‚** | å‘½ä»¤è¡Œè§£æå’Œè·¯ç”± | `ThoughtCodingCommand`, `MCPCommand` |
| **Core å±‚** | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ | `AgentLoop`, `ThoughtCodingContext` |
| **Service å±‚** | AI æœåŠ¡å’Œä¼šè¯ç®¡ç† | `LangChainService`, `SessionService` |
| **MCP å±‚** | MCP åè®®é€šä¿¡ | `MCPClient`, `MCPService` |
| **Tools å±‚** | å·¥å…·æ³¨å†Œå’Œæ‰§è¡Œ | `ToolRegistry`, `BaseTool` |
| **Config å±‚** | é…ç½®ç®¡ç† | `ConfigManager`, `AppConfig` |
| **UI å±‚** | ç”¨æˆ·ç•Œé¢ | `ThoughtCodingUI`, `TerminalManager` |

---

## âš™ï¸ é…ç½®è¯´æ˜

### ä¸»é…ç½®æ–‡ä»¶ï¼ˆconfig.yamlï¼‰

```yaml
# AI æ¨¡å‹é…ç½®
models:
  deepseek-v1:
    name: "deepseek-chat"
    baseURL: "https://api.deepseek.com/v1"
    apiKey: "sk-xxxxxxxx"
    streaming: true
    maxTokens: 4096
    temperature: 0.7

  qwen-plus:
    name: "qwen-plus"
    baseURL: "https://dashscope.aliyuncs.com/compatible-mode/v1"
    apiKey: "sk-xxxxxxxx"
    streaming: true
    maxTokens: 4096
    temperature: 0.7

# é»˜è®¤æ¨¡å‹
defaultModel: "deepseek-v1"

# å·¥å…·é…ç½®
tools:
  fileManager:
    enabled: true
    maxFileSize: 10485760  # 10MB
    allowedCommands: ["read", "write", "list", "create", "delete"]
    timeoutSeconds: 30

  commandExec:
    enabled: true
    timeoutSeconds: 30
    allowedCommands: ["ls", "git", "mvn", "npm", "python", "java"]

  codeExecutor:
    enabled: true
    timeoutSeconds: 60
    allowedLanguages: ["java", "python", "javascript", "bash"]

  search:
    enabled: true
    maxFileSize: 10485760
    timeoutSeconds: 30

# MCP é…ç½®
mcp:
  enabled: true
  autoDiscover: true
  connectionTimeout: 30
  servers:
    - name: "filesystem"
      command: "npx"
      enabled: true
      args:
        - "-y"
        - "@modelcontextprotocol/server-filesystem"
        - "/Users/username"  # ä¿®æ”¹ä¸ºä½ çš„ç›®å½•

    - name: "github"
      command: "npx"
      enabled: false
      args:
        - "-y"
        - "@modelcontextprotocol/server-github"
        - "--token"
        - "ghp_xxxxx"  # ä½ çš„ GitHub Token

    - name: "postgres"
      command: "npx"
      enabled: false
      args:
        - "-y"
        - "@modelcontextprotocol/server-postgres"
        - "postgresql://user:pass@localhost:5432/db"

# AI è¡Œä¸ºé…ç½®
ai:
  autoProcessToolResults: true  # è‡ªåŠ¨å¤„ç†å·¥å…·è°ƒç”¨ç»“æœ

# ä¼šè¯é…ç½®
session:
  autoSave: true
  maxSessions: 100
  sessionTimeout: 86400000  # 24 å°æ—¶

# UI é…ç½®
ui:
  theme: "default"
  showTimestamps: true
  colorfulOutput: true
  progressAnimation: true
```

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# DeepSeek API Key
export DEEPSEEK_API_KEY="sk-xxxxxxxx"

# é€šä¹‰åƒé—® API Key
export QWEN_API_KEY="sk-xxxxxxxx"

# GitHub Token (ç”¨äº GitHub MCP)
export GITHUB_TOKEN="ghp_xxxxxxxx"

# æ•°æ®åº“è¿æ¥ï¼ˆå¯é€‰ï¼‰
export DB_URL="postgresql://user:pass@localhost:5432/db"
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•è·å– DeepSeek API Keyï¼Ÿ

1. è®¿é—® [DeepSeek å¼€æ”¾å¹³å°](https://platform.deepseek.com/)
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. è¿›å…¥ API Keys é¡µé¢
4. åˆ›å»ºæ–°çš„ API Key
5. å°† API Key é…ç½®åˆ° `config.yaml` æˆ–ç¯å¢ƒå˜é‡

**å…è´¹é¢åº¦**ï¼šDeepSeek æä¾›å…è´¹è¯•ç”¨é¢åº¦ï¼Œè¶³å¤Ÿä¸ªäººå¼€å‘ä½¿ç”¨ã€‚

---

### Q2: MCP å·¥å…·è¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ¸…å•**ï¼š

1. **Node.js ç‰ˆæœ¬**ï¼šç¡®ä¿ Node.js >= 18
   ```bash
   node --version
   ```

2. **ç½‘ç»œè¿æ¥**ï¼šç¡®ä¿èƒ½è®¿é—® npm registry
   ```bash
   npm config get registry
   ```

3. **æƒé™é—®é¢˜**ï¼šç¡®ä¿æœ‰æ–‡ä»¶ç³»ç»Ÿè®¿é—®æƒé™
   ```yaml
   # config.yaml
   servers:
     - name: "filesystem"
       args:
         - "/Users/username"  # ç¡®ä¿è·¯å¾„å­˜åœ¨ä¸”æœ‰æƒé™
   ```

4. **æŸ¥çœ‹æ—¥å¿—**ï¼šå¯ç”¨è°ƒè¯•æ—¥å¿—
   ```bash
   export LOG_LEVEL=DEBUG
   ./bin/thought
   ```

---

### Q3: å·¥å…·è°ƒç”¨æˆåŠŸç‡ä¸é«˜æ€ä¹ˆåŠï¼Ÿ

**ä¼˜åŒ–å»ºè®®**ï¼š

1. **æ˜ç¡®æè¿°æ„å›¾**ï¼š
   - âŒ "çœ‹ä¸€ä¸‹æ–‡ä»¶"
   - âœ… "æŸ¥çœ‹ src/main/resources/config.yaml æ–‡ä»¶å†…å®¹"

2. **æä¾›å®Œæ•´ä¿¡æ¯**ï¼š
   - âŒ "æŸ¥è¯¢æ•°æ®åº“"
   - âœ… "æŸ¥è¯¢ users è¡¨ä¸­æœ€è¿‘æ³¨å†Œçš„ 10 ä¸ªç”¨æˆ·ï¼ŒæŒ‰æ³¨å†Œæ—¶é—´å€’åº"

3. **åˆ†æ­¥éª¤æ‰§è¡Œ**ï¼šå¤æ‚ä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªæ­¥éª¤

4. **ä½¿ç”¨ç›´æ¥å‘½ä»¤**ï¼šå¯¹äºæ˜ç¡®çš„æ“ä½œï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤
   ```bash
   thought> git status
   thought> mvn clean package
   ```

---

### Q4: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰ MCP å·¥å…·ï¼Ÿ

**æ­¥éª¤**ï¼š

1. **æ‰¾åˆ°æˆ–å¼€å‘ MCP æœåŠ¡å™¨**
   - å®˜æ–¹å·¥å…·ï¼šhttps://github.com/modelcontextprotocol/servers
   - ç¤¾åŒºå·¥å…·ï¼šhttps://mcp.run/

2. **æ·»åŠ åˆ°é…ç½®æ–‡ä»¶**
   ```yaml
   mcp:
     servers:
       - name: "my-custom-tool"
         command: "python"
         enabled: true
         args:
           - "path/to/my_mcp_server.py"
   ```

3. **é‡å¯åº”ç”¨**
   ```bash
   ./bin/thought
   ```

4. **éªŒè¯å·¥å…·**
   ```bash
   thought> /mcp list
   ```

---

### Q5: ä¼šè¯æ•°æ®å­˜å‚¨åœ¨å“ªé‡Œï¼Ÿ

ä¼šè¯æ•°æ®å­˜å‚¨åœ¨ `sessions/` ç›®å½•ä¸‹ï¼Œæ¯ä¸ªä¼šè¯ä¸€ä¸ª JSON æ–‡ä»¶ã€‚

```bash
sessions/
â”œâ”€â”€ 096790f1-fc85-432c-83d5-5919ff7d9211.json
â”œâ”€â”€ 17ee0d71-1d1a-4632-9b9d-fac6c2b06a17.json
â””â”€â”€ ...
```

**ç®¡ç†ä¼šè¯**ï¼š

```bash
# ä¿å­˜å½“å‰ä¼šè¯
thought> /session save my-work

# åŠ è½½å·²ä¿å­˜çš„ä¼šè¯
thought> /session load my-work

# åˆ—å‡ºæ‰€æœ‰ä¼šè¯
thought> /session list

# åˆ é™¤ä¼šè¯
rm sessions/my-session-id.json
```

---

### Q6: å¦‚ä½•æå‡å“åº”é€Ÿåº¦ï¼Ÿ

**ä¼˜åŒ–ç­–ç•¥**ï¼š

1. **ä½¿ç”¨æµå¼è¾“å‡º**ï¼šé»˜è®¤å·²å¯ç”¨
2. **å‡å°‘ä¸Šä¸‹æ–‡é•¿åº¦**ï¼šé™åˆ¶å†å²å¯¹è¯è½®æ•°
3. **é€‰æ‹©æ›´å¿«çš„æ¨¡å‹**ï¼šDeepSeek é€Ÿåº¦è¾ƒå¿«
4. **æœ¬åœ°ç¼“å­˜**ï¼šä¼šè¯è‡ªåŠ¨ç¼“å­˜åˆ°æœ¬åœ°
5. **å¹¶å‘è°ƒç”¨**ï¼šMCP å·¥å…·æ”¯æŒå¹¶å‘

---

### Q7: æ”¯æŒå“ªäº›ç¼–ç¨‹è¯­è¨€çš„ä»£ç æ‰§è¡Œï¼Ÿ

å½“å‰æ”¯æŒï¼š
- âœ… **Java**ï¼šé€šè¿‡ `javac` + `java` ç¼–è¯‘æ‰§è¡Œ
- âœ… **Python**ï¼šé€šè¿‡ `python3` è§£é‡Šæ‰§è¡Œ
- âœ… **JavaScript**ï¼šé€šè¿‡ `node` æ‰§è¡Œ
- âœ… **Bash**ï¼šç›´æ¥æ‰§è¡Œ shell è„šæœ¬

**å®‰å…¨æç¤º**ï¼šä»£ç æ‰§è¡Œæœ‰å®‰å…¨é£é™©ï¼Œä»…åœ¨å¯ä¿¡ç¯å¢ƒä¸­ä½¿ç”¨ã€‚

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **é¦–å­—å»¶è¿Ÿ** | 0.5-1s | æµå¼è¾“å‡ºé¦–ä¸ª Token çš„å»¶è¿Ÿ |
| **å®Œæ•´å“åº”** | 3-10s | å®Œæ•´å“åº”ç”Ÿæˆæ—¶é—´ï¼ˆå–å†³äºé•¿åº¦ï¼‰ |
| **å·¥å…·è°ƒç”¨** | 1-3s | å•ä¸ªå·¥å…·è°ƒç”¨çš„å¹³å‡è€—æ—¶ |
| **MCP è¿æ¥** | 2-5s | MCP æœåŠ¡å™¨å¯åŠ¨å’Œè¿æ¥æ—¶é—´ |
| **ä¼šè¯åŠ è½½** | <0.1s | ä» JSON åŠ è½½ä¼šè¯çš„æ—¶é—´ |
| **Token æ¶ˆè€—** | 500-2000/è½® | å•è½®å¯¹è¯çš„å¹³å‡ Token æ¶ˆè€— |

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

- [LangChain4j](https://github.com/langchain4j/langchain4j) - Java AI ç¼–æ’æ¡†æ¶
- [Model Context Protocol](https://modelcontextprotocol.io/) - AI å·¥å…·æ ‡å‡†åŒ–åè®®
- [DeepSeek](https://www.deepseek.com/) - é«˜æ€§ä»·æ¯”çš„ä¸­æ–‡å¤§æ¨¡å‹
- [Picocli](https://picocli.info/) - ä¼˜ç§€çš„ CLI æ¡†æ¶
- [JLine](https://github.com/jline/jline3) - å¼ºå¤§çš„ç»ˆç«¯åº“

---

## ğŸ“¬ è”ç³»æ–¹å¼

- **æŠ€æœ¯æ–‡æ¡£**ï¼š[æŸ¥çœ‹å®Œæ•´æŠ€æœ¯æ–‡æ¡£](./ThoughtCodingæŠ€æœ¯æ–‡æ¡£.md)
- **æ¼”ç¤ºè§†é¢‘**ï¼š[Bilibili](https://www.bilibili.com/video/BV14D4uzWEhC)
- **é—®é¢˜åé¦ˆ**ï¼š[GitHub Issues](https://github.com/yourusername/ThoughtCoding/issues)

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼â­**

Made with â¤ï¸ by ThoughtCoding Team

</div>

## ğŸ§  AI èƒ½åŠ›å®ç°

### 1ï¸âƒ£ ä¸Šä¸‹æ–‡ç®¡ç† (Context Management)

**é—®é¢˜**ï¼šå¦‚ä½•è®© AI ç†è§£å®Œæ•´çš„å¯¹è¯å†å²å’Œé¡¹ç›®ä¸Šä¸‹æ–‡ï¼Ÿ

**æˆ‘ä»¬çš„å®ç°**ï¼š

#### åˆ†å±‚ä¸Šä¸‹æ–‡ç­–ç•¥

```java
// 1. ä¼šè¯å†å²ç®¡ç†
private List<ChatMessage> history = new ArrayList<>();

// 2. å‡†å¤‡æ¶ˆæ¯æ—¶èåˆå†å²
private List<ChatMessage> prepareMessages(String input, List<ChatMessage> history) {
    List<ChatMessage> messages = new ArrayList<>();
    
    // ç³»ç»Ÿæç¤ºï¼ˆå·¥å…·åˆ—è¡¨ï¼‰
    messages.add(SystemMessage.from(buildSystemPromptWithTools()));
    
    // å†å²å¯¹è¯
    if (history != null && !history.isEmpty()) {
        messages.addAll(convertToLangChainHistory(history));
    }
    
    // å½“å‰è¾“å…¥
    messages.add(UserMessage.from(input));
    
    return messages;
}
```

#### ä¸Šä¸‹æ–‡ä¼˜åŒ–ç­–ç•¥

1. **é€‰æ‹©æ€§å†å²**ï¼šåªä¿ç•™æœ€è¿‘ N è½®å¯¹è¯ï¼Œé¿å…è¶…å‡º Token é™åˆ¶
2. **ä¸Šä¸‹æ–‡å‹ç¼©**ï¼šå¯¹è¾ƒé•¿çš„å†å²è¿›è¡Œæ‘˜è¦å‹ç¼©
3. **å·¥å…·ä¸Šä¸‹æ–‡**ï¼šåŠ¨æ€æ³¨å…¥å½“å‰å¯ç”¨å·¥å…·åˆ—è¡¨
4. **é¡¹ç›®ä¸Šä¸‹æ–‡**ï¼šè‡ªåŠ¨è¯†åˆ«é¡¹ç›®ç±»å‹ï¼ˆMaven/Gradleï¼‰å¹¶æ³¨å…¥ç›¸å…³ä¿¡æ¯

**å®é™…åº”ç”¨æ€è€ƒ**ï¼š

åœ¨æ•…éšœåˆ†æåœºæ™¯ä¸­ï¼Œä¸Šä¸‹æ–‡ç®¡ç†å°¤ä¸ºå…³é”®ï¼š
- ä¿ç•™å®Œæ•´çš„é”™è¯¯æ—¥å¿—å’Œå †æ ˆä¿¡æ¯
- è®°å½•å·²å°è¯•çš„è§£å†³æ–¹æ¡ˆï¼Œé¿å…é‡å¤
- èåˆé¡¹ç›®é…ç½®ä¿¡æ¯ï¼ˆpom.xmlã€application.ymlï¼‰
- å…³è” Git æäº¤å†å²ï¼Œå®šä½å¼•å…¥é—®é¢˜çš„å˜æ›´

---

### 2ï¸âƒ£ å·¥å…·è°ƒç”¨ (Tool Calling)

**é—®é¢˜**ï¼šå¦‚ä½•è®© AI è‡ªåŠ¨è°ƒç”¨å·¥å…·è€Œä¸æ˜¯åªä¼š"è¯´è¯"ï¼Ÿ

**æˆ‘ä»¬çš„å®ç°**ï¼š

#### å·¥å…·æ³¨å†Œä¸å‘ç°

```java
// 1. å·¥å…·æ³¨å†Œä¸­å¿ƒ
public class ToolRegistry {
    private final Map<String, BaseTool> tools = new HashMap<>();
    
    public void register(BaseTool tool) {
        tools.put(tool.getName(), tool);
    }
    
    public BaseTool getTool(String toolName) {
        return tools.get(toolName);
    }
}

// 2. MCP å·¥å…·è‡ªåŠ¨æ³¨å†Œ
for (var serverConfig : mcpConfig.getServers()) {
    if (serverConfig.isEnabled()) {
        var tools = mcpService.connectToServer(
            serverConfig.getName(),
            serverConfig.getCommand(),
            serverConfig.getArgs()
        );
        
        // è‡ªåŠ¨æ³¨å†Œæ‰€æœ‰å·¥å…·
        for (var tool : tools) {
            toolRegistry.register(tool);
        }
    }
}
```

#### å·¥å…·è°ƒç”¨æ£€æµ‹ä¸æ‰§è¡Œ

ç”±äº DeepSeek ä¸åŸç”Ÿæ”¯æŒ OpenAI çš„ Function Callingï¼Œæˆ‘ä»¬é‡‡ç”¨äº†**æç¤ºè¯é©±åŠ¨**çš„æ–¹å¼ï¼š

```java
// 1. åœ¨ç³»ç»Ÿæç¤ºä¸­å‘Šè¯‰ AI æœ‰å“ªäº›å·¥å…·
private String buildSystemPromptWithTools() {
    StringBuilder prompt = new StringBuilder();
    prompt.append("ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¼–ç¨‹åŠ©æ‰‹ï¼Œæ‹¥æœ‰ä»¥ä¸‹å·¥å…·ï¼š\n\n");
    
    for (var tool : toolRegistry.getAllTools()) {
        prompt.append("- ").append(tool.getName())
             .append(": ").append(tool.getDescription()).append("\n");
    }
    
    prompt.append("\nä½¿ç”¨å·¥å…·æ—¶ï¼Œè¯·è¾“å‡º JSON æ ¼å¼ï¼š{\"path\": \"æ–‡ä»¶è·¯å¾„\"}\n");
    return prompt.toString();
}

// 2. æ£€æµ‹ AI è¾“å‡ºä¸­çš„å·¥å…·è°ƒç”¨
private boolean detectAndExecuteToolCalls(String responseText) {
    if (responseText.contains("{") && responseText.contains("}")) {
        String toolName = detectToolName(responseText);
        if (toolName != null) {
            var tool = toolRegistry.getTool(toolName);
            var result = tool.execute(extractParameter(responseText));
            // æ˜¾ç¤ºç»“æœ
            messageHandler.accept(new ChatMessage("assistant", result.getOutput()));
            return true;
        }
    }
    return false;
}
```

**è®¾è®¡æƒè¡¡**ï¼š

- âœ… **ä¼˜ç‚¹**ï¼šå…¼å®¹æ‰€æœ‰ LLMï¼Œä¸ä¾èµ–ç‰¹å®š API
- âœ… **ä¼˜ç‚¹**ï¼šå¯æ§æ€§å¼ºï¼Œä¾¿äºè°ƒè¯•
- âš ï¸ **ç¼ºç‚¹**ï¼šéœ€è¦ JSON è§£æï¼Œå¯èƒ½æœ‰è¾¹ç•Œæƒ…å†µ
- âš ï¸ **ç¼ºç‚¹**ï¼šä¾èµ– AI çš„ JSON è¾“å‡ºæ ¼å¼

**æœªæ¥ä¼˜åŒ–æ–¹å‘**ï¼š

1. ä½¿ç”¨ LangChain4j çš„ ToolSpecification åŸç”Ÿæ”¯æŒ
2. å®ç°æ›´å¥å£®çš„ JSON è§£æå™¨
3. æ”¯æŒå¤šè½®å·¥å…·è°ƒç”¨ï¼ˆé“¾å¼è°ƒç”¨ï¼‰

---

### 3ï¸âƒ£ MCP åè®® (Model Context Protocol)

**é—®é¢˜**ï¼šå¦‚ä½•è®© AI èƒ½å¤Ÿè®¿é—®å„ç§å¤–éƒ¨ç³»ç»Ÿï¼ˆæ–‡ä»¶ã€æ•°æ®åº“ã€GitHubï¼‰ï¼Ÿ

**MCP çš„ä»·å€¼**ï¼š

MCP æ˜¯ Anthropic æå‡ºçš„æ ‡å‡†åŒ–å·¥å…·åè®®ï¼Œå®ƒè§£å†³äº†ï¼š
- **æ ‡å‡†åŒ–**ï¼šç»Ÿä¸€çš„å·¥å…·æ¥å£ï¼Œé¿å…é‡å¤é€ è½®å­
- **å¯æ‰©å±•æ€§**ï¼šç¤¾åŒºè´¡çŒ®çš„å·¥å…·å¯ä»¥ç›´æ¥ä½¿ç”¨
- **è¿›ç¨‹éš”ç¦»**ï¼šå·¥å…·åœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­è¿è¡Œï¼Œå®‰å…¨å¯é 

**æˆ‘ä»¬çš„å®ç°**ï¼š

#### MCP å®¢æˆ·ç«¯

```java
public class MCPClient {
    private Process mcpProcess;
    private BufferedReader stdout;
    private BufferedWriter stdin;
    
    // 1. å¯åŠ¨ MCP æœåŠ¡å™¨è¿›ç¨‹
    public boolean connect(String command, List<String> args) {
        ProcessBuilder pb = new ProcessBuilder(command);
        pb.command().addAll(args);
        mcpProcess = pb.start();
        
        // å»ºç«‹ stdio é€šä¿¡
        stdout = new BufferedReader(new InputStreamReader(mcpProcess.getInputStream()));
        stdin = new BufferedWriter(new OutputStreamWriter(mcpProcess.getOutputStream()));
        
        // åè®®åˆå§‹åŒ–
        return initializeProtocol();
    }
    
    // 2. å‘é€ JSON-RPC è¯·æ±‚
    private boolean initializeProtocol() {
        MCPRequest request = new MCPRequest(
            "initialize",
            Map.of("protocolVersion", "2024-11-05")
        );
        sendRequest(request);
        MCPResponse response = readResponse();
        return response != null && response.isSuccess();
    }
    
    // 3. è·å–å¯ç”¨å·¥å…·åˆ—è¡¨
    public List<MCPTool> getAvailableTools() {
        MCPRequest request = new MCPRequest("tools/list", Map.of());
        sendRequest(request);
        MCPResponse response = readResponse();
        return response.getTools();
    }
    
    // 4. è°ƒç”¨å·¥å…·
    public Object callTool(String toolName, Map<String, Object> parameters) {
        MCPRequest request = new MCPRequest(
            "tools/call",
            Map.of("name", toolName, "arguments", parameters)
        );
        sendRequest(request);
        MCPResponse response = readResponse();
        return response.getResult();
    }
}
```

#### MCP å·¥å…·é€‚é…å™¨

```java
// å°† MCP å·¥å…·é€‚é…ä¸º BaseTool
private List<BaseTool> convertToBaseTools(List<MCPTool> mcpTools, String serverName) {
    List<BaseTool> baseTools = new ArrayList<>();
    for (MCPTool mcpTool : mcpTools) {
        BaseTool baseTool = new BaseTool(mcpTool.getName(), mcpTool.getDescription()) {
            @Override
            public ToolResult execute(String input) {
                Map<String, Object> parameters = parseInputToParameters(input);
                Object result = callTool(serverName, mcpTool.getName(), parameters);
                return success(result != null ? result.toString() : "æ‰§è¡ŒæˆåŠŸ");
            }
            
            @Override
            public String getCategory() {
                return "MCP-" + serverName;
            }
            
            @Override
            public boolean isEnabled() {
                return true;
            }
        };
        baseTools.add(baseTool);
    }
    return baseTools;
}
```

**æŠ€æœ¯äº®ç‚¹**ï¼š

1. **è¿›ç¨‹ç®¡ç†**ï¼šæ­£ç¡®å¤„ç†å­è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ
2. **JSON-RPC**ï¼šæ ‡å‡†çš„ JSON-RPC 2.0 åè®®å®ç°
3. **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„è¶…æ—¶ã€é‡è¿ã€é™çº§æœºåˆ¶
4. **å¼‚æ­¥é€šä¿¡**ï¼šéé˜»å¡çš„æ¶ˆæ¯è¯»å†™

---

### 4ï¸âƒ£ æç¤ºè¯å·¥ç¨‹ (Prompt Engineering)

**é—®é¢˜**ï¼šå¦‚ä½•è®© AI ç†è§£å®ƒèƒ½åšä»€ä¹ˆã€åº”è¯¥å¦‚ä½•å›åº”ï¼Ÿ

**æˆ‘ä»¬çš„ç­–ç•¥**ï¼š

#### åŠ¨æ€ç³»ç»Ÿæç¤ºæ„å»º

```java
private String buildSystemPromptWithTools() {
    StringBuilder prompt = new StringBuilder();
    
    // 1. è§’è‰²å®šä½
    prompt.append("ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¼–ç¨‹åŠ©æ‰‹ï¼Œæ‹¥æœ‰ä»¥ä¸‹å·¥å…·æ¥å¸®åŠ©ç”¨æˆ·ï¼š\n\n");
    
    // 2. å·¥å…·åˆ—è¡¨ï¼ˆåŠ¨æ€ç”Ÿæˆï¼‰
    var allTools = toolRegistry.getAllTools();
    if (allTools != null && !allTools.isEmpty()) {
        prompt.append("å¯ç”¨å·¥å…·åˆ—è¡¨ï¼š\n");
        for (var tool : allTools) {
            prompt.append("- ").append(tool.getName())
                 .append(": ").append(tool.getDescription()).append("\n");
        }
        prompt.append("\n");
    }
    
    // 3. è¡Œä¸ºæŒ‡å¯¼
    prompt.append("é‡è¦æç¤ºï¼š\n");
    prompt.append("- å½“ç”¨æˆ·è¦æ±‚æŸ¥çœ‹ã€è¯»å–ã€åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•æ—¶ï¼Œä½ å¿…é¡»ä½¿ç”¨å·¥å…·\n");
    prompt.append("- ä½¿ç”¨å·¥å…·æ—¶ï¼Œè¯·è¾“å‡º JSON æ ¼å¼çš„å·¥å…·è°ƒç”¨\n");
    prompt.append("- å¯¹äº read_fileï¼šè¾“å‡º {\"path\": \"æ–‡ä»¶è·¯å¾„\"}\n");
    prompt.append("- å¯¹äº list_directoryï¼šè¾“å‡º {\"path\": \"ç›®å½•è·¯å¾„\"}\n");
    prompt.append("- ä¸è¦è¯´ä½ æ²¡æœ‰è®¿é—®æƒé™\n");
    prompt.append("- ç›´æ¥è¾“å‡ºå·¥å…·è°ƒç”¨çš„ JSONï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰§è¡Œ\n");
    
    return prompt.toString();
}
```

#### æç¤ºè¯è®¾è®¡åŸåˆ™

1. **æ¸…æ™°çš„è§’è‰²å®šä½**ï¼šæ˜ç¡®å‘Šè¯‰ AI å®ƒæ˜¯è°
2. **èƒ½åŠ›å£°æ˜**ï¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨å·¥å…·å’Œèƒ½åŠ›
3. **è¡Œä¸ºçº¦æŸ**ï¼šæ˜ç¡®ä»€ä¹ˆè¯¥åšã€ä»€ä¹ˆä¸è¯¥åš
4. **æ ¼å¼è§„èŒƒ**ï¼šè§„å®šè¾“å‡ºæ ¼å¼ï¼ˆJSONã€Markdownç­‰ï¼‰
5. **ç¤ºä¾‹å¼•å¯¼**ï¼šæä¾›å°‘é‡ç¤ºä¾‹ï¼ˆFew-shot Learningï¼‰

**å®é™…æ•ˆæœå¯¹æ¯”**ï¼š

| åœºæ™¯ | æ— æç¤ºè¯å·¥ç¨‹ | æœ‰æç¤ºè¯å·¥ç¨‹ |
|------|-------------|-------------|
| ç”¨æˆ·ï¼š"æŸ¥çœ‹ pom.xml" | "æˆ‘æ— æ³•è®¿é—®æ‚¨çš„æ–‡ä»¶..." | ç›´æ¥è°ƒç”¨ read_file å·¥å…· |
| ç”¨æˆ·ï¼š"åˆ—å‡ºç›®å½•" | "æ‚¨å¯ä»¥ä½¿ç”¨ ls å‘½ä»¤..." | è°ƒç”¨ list_directory æ˜¾ç¤ºç»“æœ |
| ç”¨æˆ·ï¼š"æœç´¢ä»£ç " | "æˆ‘å»ºè®®æ‚¨ä½¿ç”¨ grep..." | è°ƒç”¨ search_files è¿”å›ç»“æœ |

---

## ğŸ—ï¸ å·¥ç¨‹å®è·µ

### 1ï¸âƒ£ æ¡†æ¶é€‰æ‹©

#### LangChain4j - AI åº”ç”¨å¼€å‘æ¡†æ¶

**ä¸ºä»€ä¹ˆé€‰æ‹© LangChain4jï¼Ÿ**

```xml
<dependency>
    <groupId>dev.langchain4j</groupId>
    <artifactId>langchain4j</artifactId>
    <version>0.26.1</version>
</dependency>
```

- âœ… **æ ‡å‡†åŒ–**ï¼šæä¾›ç»Ÿä¸€çš„ LLM æ¥å£
- âœ… **æµå¼æ”¯æŒ**ï¼šåŸç”Ÿæ”¯æŒ Streaming Response
- âœ… **å·¥å…·é›†æˆ**ï¼šå†…ç½® ToolSpecification æ”¯æŒ
- âœ… **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ Java ç±»å‹ç³»ç»Ÿ
- âœ… **ç¤¾åŒºæ´»è·ƒ**ï¼šå¿«é€Ÿè¿­ä»£ï¼Œbug ä¿®å¤åŠæ—¶

**æ ¸å¿ƒä»£ç **ï¼š

```java
private StreamingChatLanguageModel createDeepSeekModel(AppConfig.ModelConfig config) {
    return OpenAiStreamingChatModel.builder()
            .baseUrl(config.getBaseURL())
            .apiKey(config.getApiKey())
            .modelName(config.getName())
            .temperature(config.getTemperature())
            .maxTokens(config.getMaxTokens())
            .logRequests(true)
            .logResponses(true)
            .build();
}
```

#### JLine 3 - ç»ˆç«¯äº¤äº’æ¡†æ¶

**ä¸ºä»€ä¹ˆé€‰æ‹© JLineï¼Ÿ**

```xml
<dependency>
    <groupId>org.jline</groupId>
    <artifactId>jline</artifactId>
    <version>3.23.0</version>
</dependency>
```

- âœ… **è·¨å¹³å°**ï¼šWindowsã€Linuxã€macOS ä¸€è‡´ä½“éªŒ
- âœ… **åŠŸèƒ½ä¸°å¯Œ**ï¼šå‘½ä»¤è¡¥å…¨ã€å†å²è®°å½•ã€å…‰æ ‡æ§åˆ¶
- âœ… **ANSI æ”¯æŒ**ï¼šå½©è‰²è¾“å‡ºã€æ ·å¼æ§åˆ¶
- âœ… **å¯å®šåˆ¶**ï¼šçµæ´»çš„ Completer å’Œ Highlighter

#### Picocli - å‘½ä»¤è¡Œè§£æ

**ä¸ºä»€ä¹ˆé€‰æ‹© Picocliï¼Ÿ**

```xml
<dependency>
    <groupId>info.picocli</groupId>
    <artifactId>picocli</artifactId>
    <version>4.7.5</version>
</dependency>
```

- âœ… **å£°æ˜å¼**ï¼šæ³¨è§£é©±åŠ¨ï¼Œä»£ç ç®€æ´
- âœ… **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æ—¶æ£€æŸ¥
- âœ… **è‡ªåŠ¨å¸®åŠ©**ï¼šè‡ªåŠ¨ç”Ÿæˆ help ä¿¡æ¯
- âœ… **å­å‘½ä»¤æ”¯æŒ**ï¼šå®Œç¾æ”¯æŒå¤æ‚å‘½ä»¤ç»“æ„

---

### 2ï¸âƒ£ è®¾è®¡æ¨¡å¼åº”ç”¨

#### Builder æ¨¡å¼ - å¤æ‚å¯¹è±¡æ„å»º

**åº”ç”¨åœºæ™¯**ï¼šThoughtCodingContext åˆå§‹åŒ–

```java
public class ThoughtCodingContext {
    public static class Builder {
        private AppConfig appConfig;
        private AIService aiService;
        private ToolRegistry toolRegistry;
        // ... æ›´å¤šå­—æ®µ
        
        public Builder appConfig(AppConfig appConfig) {
            this.appConfig = appConfig;
            return this;
        }
        
        public ThoughtCodingContext build() {
            return new ThoughtCodingContext(this);
        }
    }
}

// ä½¿ç”¨
ThoughtCodingContext context = new Builder()
    .appConfig(appConfig)
    .aiService(aiService)
    .toolRegistry(toolRegistry)
    .build();
```

**ä¼˜åŠ¿**ï¼š
- æ¸…æ™°çš„ä¾èµ–å…³ç³»
- å¯é€‰å‚æ•°å¤„ç†ä¼˜é›…
- é“¾å¼è°ƒç”¨æé«˜å¯è¯»æ€§

#### Strategy æ¨¡å¼ - AI æœåŠ¡ç­–ç•¥

**åº”ç”¨åœºæ™¯**ï¼šå¤šç§ AI æ¨¡å‹åˆ‡æ¢

```java
public interface AIService {
    List<ChatMessage> streamingChat(String input, List<ChatMessage> history, String modelName);
}

// å®ç°1ï¼šLangChain + DeepSeek
public class LangChainService implements AIService {
    // ...
}

// å®ç°2ï¼šOpenAI
public class OpenAIService implements AIService {
    // ...
}

// å®ç°3ï¼šæœ¬åœ°æ¨¡å‹
public class LocalModelService implements AIService {
    // ...
}
```

**ä¼˜åŠ¿**ï¼š
- æ˜“äºæ‰©å±•æ–°çš„ AI æœåŠ¡
- è¿è¡Œæ—¶åˆ‡æ¢æ¨¡å‹
- é™ä½è€¦åˆåº¦

#### Adapter æ¨¡å¼ - MCP å·¥å…·é€‚é…

**åº”ç”¨åœºæ™¯**ï¼šå°† MCP å·¥å…·é€‚é…ä¸º BaseTool

```java
// ç›®æ ‡æ¥å£
public abstract class BaseTool {
    public abstract ToolResult execute(String input);
}

// é€‚é…å™¨
public class MCPToolAdapter extends BaseTool {
    private final MCPTool mcpTool;
    private final MCPClient mcpClient;
    
    @Override
    public ToolResult execute(String input) {
        // å°† BaseTool è°ƒç”¨è½¬æ¢ä¸º MCP åè®®è°ƒç”¨
        Map<String, Object> params = parseInput(input);
        Object result = mcpClient.callTool(mcpTool.getName(), params);
        return new ToolResult(result.toString());
    }
}
```

**ä¼˜åŠ¿**ï¼š
- ç»Ÿä¸€çš„å·¥å…·æ¥å£
- MCP å·¥å…·å’Œå†…ç½®å·¥å…·æ— ç¼é›†æˆ
- ä¾¿äºæµ‹è¯•å’Œ Mock

#### Observer æ¨¡å¼ - æ¶ˆæ¯å¤„ç†

**åº”ç”¨åœºæ™¯**ï¼šæµå¼è¾“å‡ºçš„æ¶ˆæ¯é€šçŸ¥

```java
// è§‚å¯Ÿè€…æ¥å£
private Consumer<ChatMessage> messageHandler;

// æ³¨å†Œè§‚å¯Ÿè€…
public void setMessageHandler(Consumer<ChatMessage> handler) {
    this.messageHandler = handler;
}

// é€šçŸ¥è§‚å¯Ÿè€…
streamingChatModel.generate(messages, new StreamingResponseHandler<AiMessage>() {
    @Override
    public void onNext(String token) {
        ChatMessage tokenMessage = new ChatMessage("assistant", token);
        messageHandler.accept(tokenMessage);  // é€šçŸ¥
    }
});
```

**ä¼˜åŠ¿**ï¼š
- è§£è€¦æ¶ˆæ¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…
- æ”¯æŒå¤šä¸ªè§‚å¯Ÿè€…
- æ˜“äºæ‰©å±•æ–°çš„å¤„ç†é€»è¾‘

#### Registry æ¨¡å¼ - å·¥å…·æ³¨å†Œä¸­å¿ƒ

**åº”ç”¨åœºæ™¯**ï¼šToolRegistry

```java
public class ToolRegistry {
    private final Map<String, BaseTool> tools = new HashMap<>();
    
    public void register(BaseTool tool) {
        tools.put(tool.getName(), tool);
    }
    
    public BaseTool getTool(String toolName) {
        return tools.get(toolName);
    }
    
    public List<BaseTool> getAllTools() {
        return new ArrayList<>(tools.values());
    }
}
```

**ä¼˜åŠ¿**ï¼š
- é›†ä¸­ç®¡ç†æ‰€æœ‰å·¥å…·
- æ˜“äºæŸ¥è¯¢å’Œè°ƒç”¨
- æ”¯æŒåŠ¨æ€æ³¨å†Œå’Œæ³¨é”€

---

### 3ï¸âƒ£ æ¶æ„è®¾è®¡

#### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Presentation Layer             â”‚  ç”¨æˆ·äº¤äº’å±‚
â”‚  (CLIã€Terminal UIã€Input Handler)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Application Layer              â”‚  åº”ç”¨é€»è¾‘å±‚
â”‚  (AgentLoopã€MessageHandler)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Service Layer                  â”‚  æœåŠ¡å±‚
â”‚  (LangChainServiceã€SessionService) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Tool Layer                     â”‚  å·¥å…·å±‚
â”‚  (ToolRegistryã€MCP Service)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Infrastructure Layer           â”‚  åŸºç¡€è®¾æ–½å±‚
â”‚  (Configã€Loggingã€Storage)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åˆ†å±‚åŸåˆ™**ï¼š
- **å•å‘ä¾èµ–**ï¼šä¸Šå±‚ä¾èµ–ä¸‹å±‚ï¼Œä¸‹å±‚ä¸ä¾èµ–ä¸Šå±‚
- **æ¥å£éš”ç¦»**ï¼šå±‚ä¸å±‚ä¹‹é—´é€šè¿‡æ¥å£é€šä¿¡
- **èŒè´£å•ä¸€**ï¼šæ¯å±‚åªè´Ÿè´£è‡ªå·±çš„èŒè´£

#### ä¾èµ–æ³¨å…¥

**æ‰‹åŠ¨ä¾èµ–æ³¨å…¥å®ç°**ï¼š

```java
public static ThoughtCodingContext initialize() {
    // 1. é…ç½®å±‚
    ConfigManager configManager = ConfigManager.getInstance();
    AppConfig appConfig = configManager.getAppConfig();
    
    // 2. å·¥å…·å±‚
    ToolRegistry toolRegistry = new ToolRegistry(appConfig);
    MCPService mcpService = new MCPService(toolRegistry);
    
    // 3. æœåŠ¡å±‚
    AIService aiService = new LangChainService(appConfig, toolRegistry);
    SessionService sessionService = new SessionService();
    
    // 4. åº”ç”¨å±‚
    ThoughtCodingUI ui = new ThoughtCodingUI();
    
    // 5. ç»„è£…
    return new Builder()
        .appConfig(appConfig)
        .toolRegistry(toolRegistry)
        .aiService(aiService)
        .sessionService(sessionService)
        .ui(ui)
        .build();
}
```

**ä¼˜åŠ¿**ï¼š
- æ¸…æ™°çš„ä¾èµ–å…³ç³»
- æ˜“äºæµ‹è¯•ï¼ˆå¯ä»¥æ³¨å…¥ Mockï¼‰
- è§£è€¦ç»„ä»¶

---

## ğŸ’¼ å®é™…åº”ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šè‡ªåŠ¨åŒ–æ•…éšœåˆ†æ ğŸš¨

**èƒŒæ™¯**ï¼šç”Ÿäº§ç¯å¢ƒå‡ºç°æ•…éšœï¼Œéœ€è¦å¿«é€Ÿå®šä½é—®é¢˜æ ¹æº

**ThoughtCoding çš„åº”ç”¨**ï¼š

```bash
# 1. è¿æ¥ GitLab MCPï¼ˆè·å–ä»£ç ï¼‰
thought> /mcp connect gitlab

# 2. æ‹‰å–æœ€è¿‘çš„æäº¤è®°å½•
thought> å¸®æˆ‘æŸ¥çœ‹æœ€è¿‘10æ¬¡æäº¤ä¸­æ¶‰åŠè®¢å•æœåŠ¡çš„å˜æ›´

# 3. AI è‡ªåŠ¨åˆ†æ
thought> åˆ†æè¿™äº›å˜æ›´ä¸­å¯èƒ½å¯¼è‡´è®¢å•å¤±è´¥çš„ä»£ç 

# 4. å¯¹æ¯”é…ç½®æ–‡ä»¶
thought> å¯¹æ¯”ç”Ÿäº§ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒçš„application.ymlå·®å¼‚

# 5. æŸ¥çœ‹æ—¥å¿—æ¨¡å¼
thought> åœ¨æ—¥å¿—ä¸­æœç´¢ "NullPointerException" å¹¶ç»Ÿè®¡å‡ºç°é¢‘ç‡

# 6. ç”Ÿæˆæ•…éšœæŠ¥å‘Š
thought> æ ¹æ®ä»¥ä¸Šä¿¡æ¯ç”Ÿæˆæ•…éšœåˆ†ææŠ¥å‘Š
```

**AI å·¥ä½œæµç¨‹**ï¼š

```
ç”¨æˆ·è¾“å…¥ â†’ GitLab MCP å·¥å…·è°ƒç”¨ â†’ è·å–æäº¤è®°å½•
         â†“
     ä»£ç å·®å¼‚åˆ†æ â†’ è¯†åˆ«å¯ç–‘å˜æ›´
         â†“
     é…ç½®æ–‡ä»¶å¯¹æ¯” â†’ å‘ç°é…ç½®å·®å¼‚
         â†“
     æ—¥å¿—æ¨¡å¼åˆ†æ â†’ å®šä½é”™è¯¯å †æ ˆ
         â†“
     ç»¼åˆåˆ†æ â†’ ç”ŸæˆæŠ¥å‘Šï¼ˆæ ¹å› ã€å½±å“èŒƒå›´ã€ä¿®å¤å»ºè®®ï¼‰
```

**æŠ€æœ¯å®ç°**ï¼š

1. **GitLab MCP é›†æˆ**ï¼š
```yaml
mcp:
  servers:
    - name: "gitlab"
      command: "npx"
      enabled: true
      args:
        - "@modelcontextprotocol/server-gitlab"
        - "--token"
        - "${GITLAB_TOKEN}"
        - "--url"
        - "https://gitlab.yourcompany.com"
```

2. **å¤šå·¥å…·ååŒè°ƒç”¨**ï¼š
```java
// AI è‡ªåŠ¨ç”Ÿæˆå·¥å…·è°ƒç”¨é“¾
1. gitlab_get_commits(project_id="order-service", since="2024-11-01")
2. gitlab_get_diff(commit_id="abc123")
3. read_file(path="config/application-prod.yml")
4. read_file(path="config/application-test.yml")
5. search_logs(pattern="NullPointerException", time_range="1h")
6. ç»¼åˆåˆ†æ â†’ ç”ŸæˆæŠ¥å‘Š
```

**ä»·å€¼**ï¼š
- â±ï¸ **æ•ˆç‡æå‡**ï¼šä»äººå·¥ 2 å°æ—¶ç¼©çŸ­åˆ° AI 5 åˆ†é’Ÿ
- ğŸ¯ **å‡†ç¡®åº¦é«˜**ï¼šAI ä¸ä¼šé—æ¼å…³é”®ä¿¡æ¯
- ğŸ“Š **å…¨é¢æ€§**ï¼šåŒæ—¶åˆ†æä»£ç ã€é…ç½®ã€æ—¥å¿—
- ğŸ“ **å¯è¿½æº¯**ï¼šè‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„åˆ†ææŠ¥å‘Š

---

### åœºæ™¯ 2ï¼šæ™ºèƒ½ä»£ç å®¡æŸ¥ ğŸ‘¨â€ğŸ’»

**èƒŒæ™¯**ï¼šPR æäº¤åéœ€è¦ä»£ç å®¡æŸ¥ï¼Œæ£€æŸ¥è§„èŒƒæ€§å’Œæ½œåœ¨é—®é¢˜

**ThoughtCoding çš„åº”ç”¨**ï¼š

```bash
# 1. è¿æ¥ GitHub MCP
thought> /mcp connect github

# 2. è·å– PR ä¿¡æ¯
thought> åˆ†æ PR #123 çš„ä»£ç å˜æ›´

# 3. AI è‡ªåŠ¨å®¡æŸ¥
thought> æ£€æŸ¥è¿™ä¸ª PR æ˜¯å¦å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
         - SQL æ³¨å…¥é£é™©
         - ç©ºæŒ‡é’ˆå¼‚å¸¸
         - èµ„æºæ³„æ¼
         - ä»£ç è§„èŒƒé—®é¢˜
         - æ€§èƒ½é—®é¢˜

# 4. ç”Ÿæˆå®¡æŸ¥æŠ¥å‘Š
thought> ç”Ÿæˆä»£ç å®¡æŸ¥æŠ¥å‘Šï¼ŒåŒ…å«é—®é¢˜åˆ—è¡¨å’Œä¿®æ”¹å»ºè®®
```

**AI å®¡æŸ¥ç»´åº¦**ï¼š

1. **å®‰å…¨æ€§æ£€æŸ¥**ï¼š
   - SQL æ³¨å…¥ã€XSSã€CSRF
   - æ•æ„Ÿä¿¡æ¯æ³„æ¼
   - æƒé™æ§åˆ¶ç¼ºå¤±

2. **ä»£ç è´¨é‡**ï¼š
   - åœˆå¤æ‚åº¦è¿‡é«˜
   - é‡å¤ä»£ç 
   - å‘½åè§„èŒƒ
   - æ³¨é‡Šå®Œæ•´æ€§

3. **æ€§èƒ½é—®é¢˜**ï¼š
   - N+1 æŸ¥è¯¢
   - æœªä½¿ç”¨ç´¢å¼•
   - å¤§å¯¹è±¡åˆ›å»º
   - åŒæ­¥é˜»å¡è°ƒç”¨

4. **æœ€ä½³å®è·µ**ï¼š
   - è®¾è®¡æ¨¡å¼ä½¿ç”¨
   - å¼‚å¸¸å¤„ç†
   - æ—¥å¿—è§„èŒƒ
   - æµ‹è¯•è¦†ç›–åº¦

**å®ç°ç¤ºä¾‹**ï¼š

```java
// AI ç”Ÿæˆçš„å®¡æŸ¥æŠ¥å‘Š
[é«˜å±] src/main/java/OrderService.java:45
  é—®é¢˜ï¼šSQL æ‹¼æ¥å­˜åœ¨æ³¨å…¥é£é™©
  ä»£ç ï¼šString sql = "SELECT * FROM orders WHERE user_id = " + userId;
  å»ºè®®ï¼šä½¿ç”¨ PreparedStatement æˆ– JPA

[è­¦å‘Š] src/main/java/PaymentService.java:78
  é—®é¢˜ï¼šæœªå…³é—­æ•°æ®åº“è¿æ¥
  ä»£ç ï¼šConnection conn = dataSource.getConnection();
  å»ºè®®ï¼šä½¿ç”¨ try-with-resources è‡ªåŠ¨å…³é—­èµ„æº

[å»ºè®®] src/main/java/UserController.java:23
  é—®é¢˜ï¼šæ–¹æ³•å¤æ‚åº¦è¿‡é«˜ï¼ˆåœˆå¤æ‚åº¦ï¼š15ï¼‰
  å»ºè®®ï¼šæ‹†åˆ†ä¸ºå¤šä¸ªå°æ–¹æ³•ï¼Œæé«˜å¯è¯»æ€§
```

---

### åœºæ™¯ 3ï¼šé¡¹ç›®è‡ªåŠ¨åŒ–è¿ç»´ ğŸ”§

**èƒŒæ™¯**ï¼šæ—¥å¸¸è¿ç»´ä»»åŠ¡ç¹çï¼Œéœ€è¦è‡ªåŠ¨åŒ–æ‰§è¡Œ

**ThoughtCoding çš„åº”ç”¨**ï¼š

```bash
# 1. ç¯å¢ƒæ£€æŸ¥
thought> æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒçš„æœåŠ¡çŠ¶æ€

# 2. æ•°æ®åº“ç»´æŠ¤
thought> è¿æ¥ç”Ÿäº§æ•°æ®åº“ï¼ŒæŸ¥è¯¢æ…¢æŸ¥è¯¢æ—¥å¿—

# 3. æ€§èƒ½ç›‘æ§
thought> åˆ†ææœ€è¿‘1å°æ—¶çš„APIå“åº”æ—¶é—´ï¼Œæ‰¾å‡ºæœ€æ…¢çš„10ä¸ªæ¥å£

# 4. è‡ªåŠ¨åŒ–éƒ¨ç½²
thought> æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
         1. æ‹‰å–æœ€æ–°ä»£ç 
         2. è¿è¡Œæµ‹è¯•
         3. å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œæ„å»º Docker é•œåƒ
         4. éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
         5. æ‰§è¡Œå†’çƒŸæµ‹è¯•
```

**è‡ªåŠ¨åŒ–è„šæœ¬ç”Ÿæˆ**ï¼š

```bash
thought> ç”Ÿæˆä¸€ä¸ªæ¯æ—¥å¥åº·æ£€æŸ¥è„šæœ¬

# AI è‡ªåŠ¨ç”Ÿæˆ
#!/bin/bash
# Daily Health Check Script
# Generated by ThoughtCoding

echo "=== 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€ ==="
systemctl status order-service
systemctl status payment-service

echo "=== 2. æ£€æŸ¥ç£ç›˜ç©ºé—´ ==="
df -h | grep -E '(8|9)[0-9]%'

echo "=== 3. æ£€æŸ¥å†…å­˜ä½¿ç”¨ ==="
free -h

echo "=== 4. æ£€æŸ¥é”™è¯¯æ—¥å¿— ==="
tail -1000 /var/log/application.log | grep ERROR | wc -l

echo "=== 5. æ£€æŸ¥æ•°æ®åº“è¿æ¥ ==="
mysql -u root -p -e "SHOW PROCESSLIST;"

echo "=== å¥åº·æ£€æŸ¥å®Œæˆ ==="
```

---

### åœºæ™¯ 4ï¼šçŸ¥è¯†åº“é—®ç­” ğŸ“š

**èƒŒæ™¯**ï¼šæ–°åŒäº‹å…¥èŒï¼Œéœ€è¦å¿«é€Ÿäº†è§£é¡¹ç›®

**ThoughtCoding çš„åº”ç”¨**ï¼š

```bash
# 1. é¡¹ç›®æ¦‚è§ˆ
thought> è¿™ä¸ªé¡¹ç›®çš„æŠ€æœ¯æ ˆæ˜¯ä»€ä¹ˆï¼Ÿ

# 2. æ¶æ„ç†è§£
thought> ç”»å‡ºè®¢å•æœåŠ¡çš„æ¶æ„å›¾

# 3. ä»£ç å¯¼èˆª
thought> è®¢å•åˆ›å»ºçš„å®Œæ•´æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿæ¶‰åŠå“ªäº›ç±»ï¼Ÿ

# 4. é…ç½®è¯´æ˜
thought> è§£é‡Šä¸€ä¸‹ application.yml ä¸­å„ä¸ªé…ç½®é¡¹çš„å«ä¹‰

# 5. é—®é¢˜æ’æŸ¥
thought> å¦‚æœç”¨æˆ·æŠ¥å‘Šè®¢å•åˆ›å»ºå¤±è´¥ï¼Œæˆ‘åº”è¯¥æ£€æŸ¥å“ªäº›åœ°æ–¹ï¼Ÿ
```

**AI çŸ¥è¯†æå–**ï¼š

```
ç”¨æˆ·é—®é¢˜ â†’ æœç´¢ç›¸å…³ä»£ç æ–‡ä»¶
         â†“
     åˆ†æç±»ä¹‹é—´çš„è°ƒç”¨å…³ç³»
         â†“
     æå–å…³é”®é…ç½®
         â†“
     ç»“åˆæ–‡æ¡£å’Œæ³¨é‡Š
         â†“
     ç”Ÿæˆç»“æ„åŒ–å›ç­”ï¼ˆåŒ…å«ä»£ç ç‰‡æ®µã€æµç¨‹å›¾ï¼‰
```

---

## ğŸ“Š é¡¹ç›®ç»“æ„

```
ThoughtCoding/
â”œâ”€â”€ ğŸ“‚ src/main/java/com/thoughtcoding/
â”‚   â”œâ”€â”€ ğŸ¯ cli/                          # å‘½ä»¤è¡Œæ¥å£å±‚
â”‚   â”‚   â”œâ”€â”€ ThoughtCodingCommand.java    # ä¸»å‘½ä»¤å¤„ç†å™¨ï¼ˆPicocliï¼‰
â”‚   â”‚   â”œâ”€â”€ SessionCommand.java          # ä¼šè¯ç®¡ç†å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ ConfigCommand.java           # é…ç½®ç®¡ç†å‘½ä»¤
â”‚   â”‚   â””â”€â”€ MCPCommand.java              # MCP å·¥å…·å‘½ä»¤
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ§  core/                         # æ ¸å¿ƒå¼•æ“å±‚
â”‚   â”‚   â”œâ”€â”€ ThoughtCodingContext.java    # åº”ç”¨ä¸Šä¸‹æ–‡ï¼ˆä¾èµ–æ³¨å…¥å®¹å™¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ AgentLoop.java               # Agent å¯¹è¯å¾ªç¯
â”‚   â”‚   â”œâ”€â”€ MessageHandler.java          # æ¶ˆæ¯å¤„ç†å™¨ï¼ˆObserver æ¨¡å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ StreamingOutput.java         # æµå¼è¾“å‡ºå¤„ç†
â”‚   â”‚   â”œâ”€â”€ DirectCommandExecutor.java   # ç›´æ¥å‘½ä»¤æ‰§è¡Œå™¨
â”‚   â”‚   â””â”€â”€ ProjectContext.java          # é¡¹ç›®ä¸Šä¸‹æ–‡åˆ†æ
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¤– service/                      # AI æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ AIService.java               # AI æœåŠ¡æ¥å£ï¼ˆStrategy æ¨¡å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ LangChainService.java        # LangChain4j å®ç°
â”‚   â”‚   â”œâ”€â”€ SessionService.java          # ä¼šè¯æŒä¹…åŒ–æœåŠ¡
â”‚   â”‚   â””â”€â”€ PerformanceMonitor.java      # æ€§èƒ½ç›‘æ§æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”§ tools/                        # å·¥å…·ç³»ç»Ÿå±‚
â”‚   â”‚   â”œâ”€â”€ BaseTool.java                # å·¥å…·æŠ½è±¡åŸºç±»
â”‚   â”‚   â”œâ”€â”€ ToolRegistry.java            # å·¥å…·æ³¨å†Œä¸­å¿ƒï¼ˆRegistry æ¨¡å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ ToolProvider.java            # å·¥å…·æä¾›è€…æ¥å£
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ exec/                     # æ‰§è¡Œå·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ CommandExecutorTool.java # å‘½ä»¤æ‰§è¡Œå·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ CodeExecutorTool.java    # ä»£ç æ‰§è¡Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ file/                     # æ–‡ä»¶å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ FileManagerTool.java     # æ–‡ä»¶ç®¡ç†å·¥å…·
â”‚   â”‚   â””â”€â”€ ğŸ“‚ search/                   # æœç´¢å·¥å…·
â”‚   â”‚       â””â”€â”€ GrepSearchTool.java      # Grep æœç´¢å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”Œ mcp/                          # MCP åè®®å±‚
â”‚   â”‚   â”œâ”€â”€ MCPService.java              # MCP æœåŠ¡ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ MCPClient.java               # MCP å®¢æˆ·ç«¯ï¼ˆJSON-RPCï¼‰
â”‚   â”‚   â”œâ”€â”€ MCPToolAdapter.java          # MCP å·¥å…·é€‚é…å™¨ï¼ˆAdapter æ¨¡å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ MCPToolManager.java          # MCP å·¥å…·ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ ğŸ“‚ model/                    # MCP æ•°æ®æ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ MCPRequest.java          # MCP è¯·æ±‚
â”‚   â”‚       â”œâ”€â”€ MCPResponse.java         # MCP å“åº”
â”‚   â”‚       â”œâ”€â”€ MCPTool.java             # MCP å·¥å…·å®šä¹‰
â”‚   â”‚       â””â”€â”€ InputSchema.java         # å·¥å…·è¾“å…¥æ¨¡å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¨ ui/                           # ç”¨æˆ·ç•Œé¢å±‚
â”‚   â”‚   â”œâ”€â”€ ThoughtCodingUI.java         # UI ä¸»æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ AnsiColors.java              # ANSI é¢œè‰²å¸¸é‡
â”‚   â”‚   â””â”€â”€ ğŸ“‚ component/                # UI ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ ChatRenderer.java        # èŠå¤©æ¸²æŸ“å™¨
â”‚   â”‚       â”œâ”€â”€ StatusBar.java           # çŠ¶æ€æ ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ ProgressIndicator.java   # è¿›åº¦æŒ‡ç¤ºå™¨
â”‚   â”‚       â”œâ”€â”€ InputHandler.java        # è¾“å…¥å¤„ç†å™¨
â”‚   â”‚       â””â”€â”€ ToolDisplay.java         # å·¥å…·æ˜¾ç¤ºç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ âš™ï¸ config/                       # é…ç½®ç®¡ç†å±‚
â”‚   â”‚   â”œâ”€â”€ AppConfig.java               # åº”ç”¨é…ç½®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ MCPConfig.java               # MCP é…ç½®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ ConfigLoader.java            # é…ç½®åŠ è½½å™¨
â”‚   â”‚   â””â”€â”€ ConfigManager.java           # é…ç½®ç®¡ç†å™¨ï¼ˆSingletonï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“Š model/                        # æ•°æ®æ¨¡å‹å±‚
â”‚       â”œâ”€â”€ ChatMessage.java             # èŠå¤©æ¶ˆæ¯
â”‚       â”œâ”€â”€ SessionData.java             # ä¼šè¯æ•°æ®
â”‚       â”œâ”€â”€ ToolCall.java                # å·¥å…·è°ƒç”¨
â”‚       â”œâ”€â”€ ToolResult.java              # å·¥å…·ç»“æœ
â”‚       â””â”€â”€ ModelConfig.java             # æ¨¡å‹é…ç½®
â”‚
â”œâ”€â”€ ğŸ“‚ src/main/resources/               # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml                      # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ thoughtcoding-banner.txt         # å¯åŠ¨æ¨ªå¹…
â”‚
â”œâ”€â”€ ğŸ“‚ bin/                              # å¯æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ thought                          # Linux/macOS å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ thought.bat                      # Windows å¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“‚ sessions/                         # ä¼šè¯å­˜å‚¨ç›®å½•
â”‚   â””â”€â”€ *.json                           # ä¼šè¯æ•°æ®æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                             # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ ARCHITECTURE.md                  # æ¶æ„è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ MCP_GUIDE.md                     # MCP ä½¿ç”¨æŒ‡å—
â”‚   â””â”€â”€ API_REFERENCE.md                 # API å‚è€ƒ
â”‚
â”œâ”€â”€ ğŸ“„ pom.xml                           # Maven é…ç½®
â”œâ”€â”€ ğŸ“„ README.md                         # é¡¹ç›®è¯´æ˜
â””â”€â”€ ğŸ“„ LICENSE                           # å¼€æºè®¸å¯è¯
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### config.yaml ç»“æ„

```yaml
# AI æ¨¡å‹é…ç½®
models:
  deepseek-v1:
    name: "deepseek-chat"
    baseURL: "https://api.deepseek.com/v1"
    apiKey: "${DEEPSEEK_API_KEY}"
    streaming: true
    maxTokens: 4096
    temperature: 0.7

# é»˜è®¤æ¨¡å‹
defaultModel: "deepseek-v1"

# MCP é…ç½®
mcp:
  enabled: true
  autoDiscover: true
  connectionTimeout: 30
  servers:
    # æ–‡ä»¶ç³»ç»Ÿå·¥å…·
    - name: "filesystem"
      command: "npx"
      enabled: true
      args:
        - "-y"
        - "@modelcontextprotocol/server-filesystem"
        - "/Users/yourname"
    
    # GitHub å·¥å…·
    - name: "github"
      command: "npx"
      enabled: true
      args:
        - "@modelcontextprotocol/server-github"
        - "${GITHUB_TOKEN}"
    
    # PostgreSQL å·¥å…·
    - name: "postgres"
      command: "npx"
      enabled: false
      args:
        - "@modelcontextprotocol/server-postgres"
        - "postgresql://localhost/db"

# å·¥å…·é…ç½®
tools:
  fileManager:
    enabled: true
    maxFileSize: 10485760  # 10MB
    allowedExtensions: ["java", "xml", "yaml", "json", "md"]
  
  commandExec:
    enabled: true
    timeoutSeconds: 30
    allowedCommands: ["ls", "cat", "grep", "git", "mvn"]
  
  search:
    enabled: true
    maxFileSize: 10485760

# UI é…ç½®
ui:
  colorScheme: "dark"
  showTimestamp: true
  showTokenCount: true
  progressAnimation: true

# æ€§èƒ½é…ç½®
performance:
  enableMonitoring: true
  logLevel: "INFO"
  cacheSize: 1000

# AI è¡Œä¸ºé…ç½®
ai:
  autoProcessToolResults: true
```

---

## ğŸ”® AI èƒ½åŠ›åº”ç”¨çš„æ€è€ƒä¸ç†è§£

### 1. ä»"å¯¹è¯"åˆ°"è¡ŒåŠ¨"çš„æ¼”è¿›

**ä¼ ç»Ÿ AI å¯¹è¯å·¥å…·çš„å±€é™**ï¼š
- âŒ åªèƒ½"è¯´"ä¸èƒ½"åš"
- âŒ ä¾èµ–ç”¨æˆ·æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤
- âŒ æ— æ³•è®¿é—®å¤–éƒ¨ç³»ç»Ÿ

**ThoughtCoding çš„çªç ´**ï¼š
- âœ… AI Agent èƒ½å¤Ÿè‡ªä¸»è°ƒç”¨å·¥å…·
- âœ… å·¥å…·è°ƒç”¨å¯¹ç”¨æˆ·é€æ˜
- âœ… é€šè¿‡ MCP è¿æ¥æ•´ä¸ªå·¥å…·ç”Ÿæ€

**æ ¸å¿ƒæ€æƒ³**ï¼š
> AI ä¸åº”è¯¥åªæ˜¯ä¸€ä¸ª"é¡¾é—®"ï¼Œå‘Šè¯‰ä½ è¯¥åšä»€ä¹ˆï¼Œè€Œåº”è¯¥æ˜¯ä¸€ä¸ª"åŠ©æ‰‹"ï¼Œç›´æ¥å¸®ä½ å®Œæˆä»»åŠ¡ã€‚

### 2. ä¸Šä¸‹æ–‡æ˜¯ AI çš„"è®°å¿†"

**ä¸ºä»€ä¹ˆä¸Šä¸‹æ–‡ç®¡ç†å¦‚æ­¤é‡è¦ï¼Ÿ**

æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼š
```
ç”¨æˆ·ï¼šå¸®æˆ‘åˆ†æè®¢å•æœåŠ¡çš„æ€§èƒ½é—®é¢˜
AIï¼š  å¥½çš„ï¼Œæˆ‘éœ€è¦çœ‹ä¸€ä¸‹ç›¸å…³ä»£ç 
      [è°ƒç”¨ read_file(OrderService.java)]
      æˆ‘å‘ç°æœ‰ä¸ªæ…¢æŸ¥è¯¢...

ç”¨æˆ·ï¼šé‚£æ€ä¹ˆä¼˜åŒ–ï¼Ÿ
AIï¼š  [ç†è§£"é‚£"æŒ‡çš„æ˜¯åˆšæ‰çš„æ…¢æŸ¥è¯¢]
      å¯ä»¥æ·»åŠ ç´¢å¼•...
```

**å…³é”®ç‚¹**ï¼š
- AI éœ€è¦è®°ä½ä¹‹å‰çš„å¯¹è¯
- AI éœ€è¦ç†è§£æŒ‡ä»£å…³ç³»ï¼ˆ"é‚£"ã€"è¿™ä¸ª"ï¼‰
- AI éœ€è¦ç´¯ç§¯çš„ä¸Šä¸‹æ–‡æ¥åšå‡ºå‡†ç¡®åˆ¤æ–­

**æˆ‘ä»¬çš„å®ç°**ï¼š
1. **ä¼šè¯å†å²**ï¼šä¿ç•™å®Œæ•´çš„å¯¹è¯è®°å½•
2. **å·¥å…·ä¸Šä¸‹æ–‡**ï¼šè®°å½•å·²è°ƒç”¨çš„å·¥å…·å’Œç»“æœ
3. **é¡¹ç›®ä¸Šä¸‹æ–‡**ï¼šè‡ªåŠ¨è¯†åˆ«é¡¹ç›®ç»“æ„å’Œé…ç½®

### 3. MCP æ˜¯ AI çš„"çœ¼ç›å’ŒåŒæ‰‹"

**MCP çš„ä»·å€¼ä¸ä»…æ˜¯"å·¥å…·åè®®"**ï¼š

ä¼ ç»Ÿæ–¹å¼ï¼š
```
å¼€å‘è€… â†’ æ‰‹å†™é€‚é…å™¨ â†’ æ¯ä¸ªå¤–éƒ¨ç³»ç»Ÿ
         â†“
      ç»´æŠ¤æˆæœ¬é«˜ã€é‡å¤é€ è½®å­
```

MCP æ–¹å¼ï¼š
```
å¼€å‘è€… â†’ MCP åè®® â†’ ç¤¾åŒºç”Ÿæ€ï¼ˆ50+ å·¥å…·ï¼‰
         â†“
      å³æ’å³ç”¨ã€æ ‡å‡†åŒ–ã€å¯å¤ç”¨
```

**æˆ‘çš„ç†è§£**ï¼š
- MCP æ˜¯ AI æ—¶ä»£çš„"USB åè®®"
- å®ƒè®© AI èƒ½å¤Ÿ"å³æ’å³ç”¨"åœ°è®¿é—®å„ç§ç³»ç»Ÿ
- æœªæ¥ä¼šæœ‰æ›´å¤šçš„ MCP å·¥å…·æ¶Œç°

### 4. æç¤ºè¯å·¥ç¨‹æ˜¯"è°ƒæ•™" AI çš„è‰ºæœ¯

**å¥½çš„æç¤ºè¯ vs å·®çš„æç¤ºè¯**ï¼š

âŒ **å·®çš„æç¤ºè¯**ï¼š
```
"ä½ æ˜¯ä¸€ä¸ª AI åŠ©æ‰‹"
```

âœ… **å¥½çš„æç¤ºè¯**ï¼š
```
"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¼–ç¨‹åŠ©æ‰‹ï¼Œæ‹¥æœ‰ä»¥ä¸‹å·¥å…·ï¼š
- read_file: è¯»å–æ–‡ä»¶å†…å®¹
- list_directory: åˆ—å‡ºç›®å½•
å½“ç”¨æˆ·è¦æ±‚æŸ¥çœ‹æ–‡ä»¶æ—¶ï¼Œä½ å¿…é¡»ä½¿ç”¨ read_file å·¥å…·ï¼Œ
è¾“å‡º JSON æ ¼å¼ï¼š{\"path\": \"æ–‡ä»¶è·¯å¾„\"}
ä¸è¦è¯´ä½ æ²¡æœ‰è®¿é—®æƒé™ã€‚"
```

**å…³é”®åŸåˆ™**ï¼š
1. **æ˜ç¡®èº«ä»½**ï¼šå‘Šè¯‰ AI å®ƒæ˜¯è°
2. **åˆ—ä¸¾èƒ½åŠ›**ï¼šå‘Šè¯‰ AI å®ƒèƒ½åšä»€ä¹ˆ
3. **è§„èŒƒè¡Œä¸º**ï¼šå‘Šè¯‰ AI è¯¥æ€ä¹ˆåš
4. **æä¾›ç¤ºä¾‹**ï¼šç»™ AI çœ‹æ­£ç¡®çš„è¾“å‡º

---

## ğŸš€ æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡ï¼ˆ1-2 ä¸ªæœˆï¼‰

- [ ] **å®Œå–„å·¥å…·è°ƒç”¨**ï¼šå®ç°åŸç”Ÿ Function Calling æ”¯æŒ
- [ ] **å¢å¼ºä¸Šä¸‹æ–‡**ï¼šå®ç°è‡ªåŠ¨ä¸Šä¸‹æ–‡å‹ç¼©å’Œæ‘˜è¦
- [ ] **æ›´å¤š MCP å·¥å…·**ï¼šé›†æˆ Jiraã€Confluenceã€Slack ç­‰
- [ ] **æµ‹è¯•è¦†ç›–**ï¼šå•å…ƒæµ‹è¯•è¦†ç›–ç‡è¾¾åˆ° 80%+

### ä¸­æœŸç›®æ ‡ï¼ˆ3-6 ä¸ªæœˆï¼‰

- [ ] **Web ç•Œé¢**ï¼šæä¾› Web UIï¼Œæ”¯æŒå›¢é˜Ÿåä½œ
- [ ] **å·¥ä½œæµå¼•æ“**ï¼šæ”¯æŒè‡ªå®šä¹‰å·¥ä½œæµï¼ˆå¦‚ CI/CDï¼‰
- [ ] **çŸ¥è¯†åº“é›†æˆ**ï¼šRAG æŠ€æœ¯ï¼ŒåŸºäºé¡¹ç›®æ–‡æ¡£é—®ç­”
- [ ] **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒè‹±æ–‡ã€æ—¥æ–‡ç•Œé¢

### é•¿æœŸç›®æ ‡ï¼ˆ6-12 ä¸ªæœˆï¼‰

- [ ] **AI Agent ç¼–æ’**ï¼šå¤šä¸ª Agent ååŒå·¥ä½œ
- [ ] **è‡ªåŠ¨åŒ–è¿ç»´å¹³å°**ï¼šå®Œæ•´çš„ AIOps è§£å†³æ–¹æ¡ˆ
- [ ] **ä¼ä¸šç‰ˆ**ï¼šæƒé™ç®¡ç†ã€å®¡è®¡æ—¥å¿—ã€ç§æœ‰éƒ¨ç½²
- [ ] **IDE æ’ä»¶**ï¼šIntelliJ IDEAã€VS Code é›†æˆ

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

### å¦‚ä½•è´¡çŒ®

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ”¹åŠ¨ï¼š`git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. æäº¤ Pull Request

### å¼€å‘è§„èŒƒ

- éµå¾ª Java ä»£ç è§„èŒƒ
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–° READMEï¼ˆå¦‚æœ‰å¿…è¦ï¼‰

---

## ğŸ“„ å¼€æºè®¸å¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ‘¨â€ğŸ’» ä½œè€…

**ThoughtCoding Team**

- ğŸ“§ Email: contact@thoughtcoding.dev
- ğŸŒ Website: https://thoughtcoding.dev
- ğŸ’¬ Discord: https://discord.gg/thoughtcoding

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [LangChain4j](https://github.com/langchain4j/langchain4j) - AI åº”ç”¨å¼€å‘æ¡†æ¶
- [JLine](https://github.com/jline/jline3) - ç»ˆç«¯äº¤äº’æ¡†æ¶
- [Picocli](https://picocli.info/) - å‘½ä»¤è¡Œè§£ææ¡†æ¶
- [Model Context Protocol](https://modelcontextprotocol.io/) - å·¥å…·åè®®æ ‡å‡†

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**

Made with â¤ï¸ by ThoughtCoding Team

</div>

